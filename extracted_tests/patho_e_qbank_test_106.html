<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Tuberculosis</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`üß† Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Tuberculosis</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                6 Questions | 6 Total Marks | 16 min Duration | ~160.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 6 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 16 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 6</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Tuberculosis - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 6</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 6 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "All of the following are conditions where the Mantoux test can be false negative except:", "options": [{"label": "A", "text": "Sarcoidosis", "correct": false}, {"label": "B", "text": "Malnutrition", "correct": false}, {"label": "C", "text": "Hodgkin lymphoma", "correct": false}, {"label": "D", "text": "Prior vaccination by BCG", "correct": true}], "correct_answer": "D. Prior vaccination by BCG", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>Prior vaccination by BCG Shows False Positive result .</p>\n<p><strong>Highyeild:</strong></p><p>Tuberculin/Mantoux Test The tuberculin skin test is performed by intracutaneous injection of purified protein derivative of M. tuberculosis induces a visible and palpable induration that peaks in 48 to 72 hours . A positive tuberculin test signifies T-cell‚Äìmediated immunity to mycobacterial antigens but does not differentiate between infection and active disease . Mantoux/Tuberculin test is Type IV Hypersensitivity . True Negative: A person has never been infected with TB. True Positive: The person has developed antibodies against TB. False-negative reactions may occur in the setting of certain viral infections, sarcoidosis, malnutrition, Hodgkin lymphoma, immunosuppression , and (notably) overwhelming active tuberculous disease . False-positive reactions may result from infection by atypical mycobacteria or prior vaccination with BCG (Bacillus Calmette-Guerin) , an attenuated strain of M. bovis that is used as a vaccine in some countries.</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. Sarcoidosis. Shows False-negative result . Option: B. Malnutrition. Shows False-negative result . Option: C. Hodgkin lymphoma. Shows False-negative result .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which mediator plays an important role in TH1-mediated macrophage activation and killing of bacteria?", "options": [{"label": "A", "text": "TNF", "correct": false}, {"label": "B", "text": "IL 2", "correct": false}, {"label": "C", "text": "IFN-Œ≥", "correct": true}, {"label": "D", "text": "TGF beta", "correct": false}], "correct_answer": "C. IFN-Œ≥", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>IFN-Œ≥ TH1-mediated macrophage activation and killing of bacteria: TH1 cells , both in lymph nodes and in the lung, produce IFN-Œ≥ . IFN-Œ≥ is the critical mediator that enables macrophages to contain the M. tuberculosis infection . First, IFN-Œ≥ stimulates maturation of the phagolysosome in infected macrophages , exposing the bacteria to a lethal acidic, oxidizing environment. Second, IFN-Œ≥ stimulates the expression of inducible nitric oxide (NO) synthase , which produces NO . NO combines with other oxidants to create reactive nitrogen intermediates, which are important for killing mycobacteria . Third, IFN-Œ≥ mobilizes antimicrobial peptides ( defensins ) against the bacteria. Finally, IFN-Œ≥ stimulates autophagy , which sequesters and then destroys damaged organelles and intracellular bacteria such as M. tuberculosis. In addition to stimulating macrophages to kill mycobacteria, the Th1 response orchestrates the formation of granulomas and caseous necrosis .</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. TNF. Incorrect . Option: B. IL 2. Incorrect . Option: D. TGF beta. Incorrect .</p>\n<p><strong>Extraedge:</strong></p><p>Macrophages activated by IFN-Œ≥ differentiate into the ‚Äú epithelioid histiocytes ‚Äù that aggregate to form granulomas ; some epithelioid cells may fuse to form giant cells .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Ghon complex is", "options": [{"label": "A", "text": "Parenchymal lung lesion", "correct": false}, {"label": "B", "text": "Lymph nodal involvement", "correct": false}, {"label": "C", "text": "Calcified lesion", "correct": false}, {"label": "D", "text": "A and B", "correct": true}], "correct_answer": "D. A and B", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>A and B The combination of parenchymal lung lesion and nodal involvement is referred to as the Ghon complex .</p>\n<p><strong>Highyeild:</strong></p><p>Ghon‚Äôs complex Typically, the inhaled bacilli implant in the distal airspaces of the lower part of the upper lobe or the upper part of the lower lobe , usually close to the pleura . As sensitization develops, a 1- to 1.5-cm area of gray-white inflammation with consolidation emerges , known as the Ghon focus . In most cases, the center of this focus undergoes caseous necrosis . Tubercle bacilli, free or within phagocytes, drain to the regional nodes, which are often caseate. The combination of parenchymal lung lesion and nodal involvement is referred to as the Ghon complex .</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. Parenchymal lung lesion. Called Ghon focus . Option: B. Lymph nodal involvement. Incorrect . Option: C. Calcified lesion. Incorrect .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "In primary tuberculosis, all of the following can be seen except:", "options": [{"label": "A", "text": "Caseation", "correct": false}, {"label": "B", "text": "Cavitation", "correct": true}, {"label": "C", "text": "Calcification", "correct": false}, {"label": "D", "text": "Langerhans giant cell", "correct": false}], "correct_answer": "B. Cavitation", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>Cavitation</p>\n<p><strong>Highyeild:</strong></p><p>Primary tuberculosis is a form of the disease that develops in a previously unexposed and therefore unsensitized person . With primary tuberculosis, the source of the organism is exogenous . In most people, the primary infection is contained, but in others, primary tuberculosis is progressive. In contrast to secondary tuberculosis (an apical disease with cavitation; see later), progressive primary tuberculosis more often resembles acute bacterial pneumonia with the consolidation of the lobe, hilar adenopathy, and pleural effusion. Lymphatic and hematogenous dissemination following primary infection may result in the development of tuberculous meningitis and miliary tuberculosis .</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. Caseation. Seen in primary TB . Option: C. Calcification. Seen in primary TB . Option: D. Langerhans giant cell. Seen in primary TB .</p>\n<p><strong>Extraedge:</strong></p><p>Secondary pulmonary tuberculosis classically involves the apex of the upper lobes of one or both lungs . Because of the preexistence of hypersensitivity, the bacilli elicit a prompt and marked tissue response that tends to wall off the focus of infection . As a result, the regional lymph nodes are less prominently involved early in secondary disease than they are in primary tuberculosis. On the other hand, cavitation occurs readily in the secondary form . Indeed, cavitation is almost inevitable in neglected secondary tuberculosis , and erosion of the cavities into an airway is an important source of infection because the person now coughs sputum that contains bacteria .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Lung biopsy from a 25-year-old patient who presented with a history of weight loss, evening rise of temperature, raised ESR, and cervical lymphadenopathy. Based on clinical findings and the histological diagram given below, what is your diagnosis?", "options": [{"label": "A", "text": "Hodgkin lymphoma", "correct": false}, {"label": "B", "text": "Tuberculosis", "correct": true}, {"label": "C", "text": "Asthma", "correct": false}, {"label": "D", "text": "Squamous cell carcinoma", "correct": false}], "correct_answer": "B. Tuberculosis", "question_images": ["https://dbmi-data.s3.ap-south-1.amazonaws.com/photos-1686826656223-QTDP066006IMG1.JPG"], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>Tuberculosis</p>\n<p><strong>Highyeild:</strong></p><p>Histologically , sites of active involvement are marked by a characteristic granulomatous inflammatory reaction that forms both caseating and noncaseating tubercles . Individual tubercles are microscopic; it is only when multiple granulomas coalesce that they become macroscopically visible. The granulomas are usually enclosed within a fibroblastic rim punctuated by lymphocytes . Multinucleated giant cells are present in the granulomas. Immunocompromised people do not form the characteristic granulomas, and their macrophages contain many bacilli</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. Hodgkin lymphoma. Hodgkin‚Äôs Lymphoma is B cell-derived lymphoma . Reed‚ÄìSternberg cells are distinctive, giant cells found with light microscopy in biopsies from individuals with Hodgkin lymphoma. Option: C. Asthma is a reversible bronchospasm, Type I Hypersensitivity, microscopy shows Curshman spirals, Creola bodies, and Charcot Leyden crystals ( made up of Galactin 10) . Option: D. Squamous cell carcinoma. Squamous Cell Carcinoma microscopically shows Dysplastic squamous epithelium, Tumor nests in subepithelium, and Keratin pearls .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "All of the following statements are true regarding mycobacterium avium complex except:", "options": [{"label": "A", "text": "Infection is seen predominantly in immunocompromised patients", "correct": false}, {"label": "B", "text": "Hallmark of disease is macrophages laden with acid-fast bacilli", "correct": false}, {"label": "C", "text": "Grossly, the involved organ shows yellow pigmentation", "correct": false}, {"label": "D", "text": "Numerous granuloma formation is always seen", "correct": true}], "correct_answer": "D. Numerous granuloma formation is always seen", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Solution:</strong></p><p>Numerous granuloma formation is always seen</p>\n<p><strong>Highyeild:</strong></p><p>Mycobacterium avium complex (MAC): Clinically significant infection with Mycobacterium avium complex (MAC) is uncommon except among people with T-cell immunodeficiency due to AIDS , and immunosuppression resulting from treatment for transplant rejection or autoimmune diseases . Normal host defense mechanisms usually prevent infection, so vulnerable individuals include those with structural lung damage, cystic fibrosis, bronchiectasis, primary ciliary dyskinesia, chronic obstructive pulmonary disease, or pneumoconiosis . The hallmark of MAC infections in patients with HIV is abundant acid-fast bacilli within macrophages. Depending on the severity of immunodeficiency , MAC infections can be widely disseminated throughout the mononuclear phagocyte system , causing enlargement of involved lymph nodes, liver, and spleen , or localized to the lungs. There may be a yellowish pigmentation to these organs secondary to a large number of organisms present in swollen macrophages . Granulomas, lymphocytes, and tissue destruction are RARE . Mycobacterium avium infection in a patient with AIDS, showing massive infection with acid-fast organisms. This pattern is more common in patients with acquired immunodeficiencies.</p>\n<p><strong>Random:</strong></p><p>Explanation for incorrect options: - Option: A. Infection is seen predominantly in immunocompromised patients. Correct . Option: B. Hallmark of the disease is macrophages laden with acid-fast bacilli. Correct . Option: C. Grossly, the involved organ shows yellow pigmentation. Correct .</p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(