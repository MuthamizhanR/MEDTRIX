<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Squint  Optics</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`ðŸ§  Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Squint  Optics</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                41 Questions | 224 Total Marks | 51 min Duration | ~74.63 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 41 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 51 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 41</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Squint  Optics - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 41</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 41 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "Which of the following material is best suited for manufacture of gas permeable contact lenses â€“", "options": [{"label": "A", "text": "Glass", "correct": false}, {"label": "B", "text": "Methyl methacrylate", "correct": false}, {"label": "C", "text": "Silicone", "correct": true}, {"label": "D", "text": "Rubber", "correct": false}], "correct_answer": "C. Silicone", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/30155561697957369/30155561697957369.m3u8"}, {"text": "Fixation of visual reflexes is accomplished by â€“", "options": [{"label": "A", "text": "6 mth", "correct": true}, {"label": "B", "text": "1 yr", "correct": false}, {"label": "C", "text": "2 yr", "correct": false}, {"label": "D", "text": "3yr", "correct": false}], "correct_answer": "A. 6 mth", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2652611697957383/2652611697957383.m3u8"}, {"text": "True regarding LR palsy is â€“", "options": [{"label": "A", "text": "Crossed diplopia", "correct": false}, {"label": "B", "text": "Uncrossed diplopia", "correct": true}, {"label": "C", "text": "Divergent squint", "correct": false}, {"label": "D", "text": "Pupillary dilation", "correct": false}], "correct_answer": "B. Uncrossed diplopia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/16502051697957397/16502051697957397.m3u8"}, {"text": "Treatment of choice in aphakia isâ€“", "options": [{"label": "A", "text": "Spectacles", "correct": false}, {"label": "B", "text": "Contact lens", "correct": false}, {"label": "C", "text": "Intra â€“ocular lens", "correct": true}, {"label": "D", "text": "Epikerato phakia", "correct": false}], "correct_answer": "C. Intra â€“ocular lens", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/71148521697957410/71148521697957410.m3u8"}, {"text": "Most important factor to focus rays on retina", "options": [{"label": "A", "text": "Lens", "correct": false}, {"label": "B", "text": "Corneal curvature", "correct": true}, {"label": "C", "text": "Axial", "correct": false}, {"label": "D", "text": "Media length of eyeball", "correct": false}], "correct_answer": "B. Corneal curvature", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49159161697964510/49159161697964510.m3u8"}, {"text": "The power of eye is â€“", "options": [{"label": "A", "text": "15D", "correct": false}, {"label": "B", "text": "29D", "correct": false}, {"label": "C", "text": "58D", "correct": true}, {"label": "D", "text": "100D", "correct": false}], "correct_answer": "C. 58D", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64117091697964541/64117091697964541.m3u8"}, {"text": "Secondary deviation is more than primary deviation in a diabetic patient:â€“", "options": [{"label": "A", "text": "Spastic squint", "correct": false}, {"label": "B", "text": "Paralytic squint", "correct": true}, {"label": "C", "text": "Concomitant squint", "correct": false}, {"label": "D", "text": "Restrictive squint", "correct": false}], "correct_answer": "B. Paralytic squint", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/34254191697957436/34254191697957436.m3u8"}, {"text": "treatment of amblyopia in a 3 yr old child is â€“", "options": [{"label": "A", "text": "Orthoptic exercises", "correct": false}, {"label": "B", "text": "Occlusion of one eye", "correct": true}, {"label": "C", "text": "Prism", "correct": false}, {"label": "D", "text": "Surgery", "correct": false}], "correct_answer": "B. Occlusion of one eye", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/49504481697957454/49504481697957454.m3u8"}, {"text": "Treatment of accomodative strabismus isâ€“", "options": [{"label": "A", "text": "Orthoptic exercises", "correct": false}, {"label": "B", "text": "Lens implant", "correct": false}, {"label": "C", "text": "Refractive correction", "correct": true}, {"label": "D", "text": "Prism correction", "correct": false}], "correct_answer": "C. Refractive correction", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40520621697957473/40520621697957473.m3u8"}, {"text": "Downward movement of abducted eyeball is action of â€“", "options": [{"label": "A", "text": "IO", "correct": false}, {"label": "B", "text": "SO", "correct": false}, {"label": "C", "text": "IR", "correct": true}, {"label": "D", "text": "SR", "correct": false}], "correct_answer": "C. IR", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64719931697957501/64719931697957501.m3u8"}, {"text": "Infant is physiologically", "options": [{"label": "A", "text": "Myopic", "correct": false}, {"label": "B", "text": "Hypermetropic", "correct": true}, {"label": "C", "text": "Astigmatic", "correct": false}, {"label": "D", "text": "Emmetropic", "correct": false}], "correct_answer": "B. Hypermetropic", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43981001697957518/43981001697957518.m3u8"}, {"text": "Which is not a clinical feature of right sided VI th nerve palsy-", "options": [{"label": "A", "text": "Convergent squint", "correct": false}, {"label": "B", "text": "Face turn to left", "correct": true}, {"label": "C", "text": "Inability to abduct right eye", "correct": false}, {"label": "D", "text": "Diplopia", "correct": false}], "correct_answer": "B. Face turn to left", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70908231697957552/70908231697957552.m3u8"}, {"text": "Action of superior oblique muscle are all except:", "options": [{"label": "A", "text": "Intorsion", "correct": false}, {"label": "B", "text": "Extorsion", "correct": true}, {"label": "C", "text": "Depression", "correct": false}, {"label": "D", "text": "Abduction", "correct": false}], "correct_answer": "B. Extorsion", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/70050211697957895/70050211697957895.m3u8"}, {"text": "Soft contact lens uses have high tendency to develop", "options": [{"label": "A", "text": "Recurrent corneal ulcer", "correct": false}, {"label": "B", "text": "Acanth amoeba ulcer", "correct": false}, {"label": "C", "text": "Pseudomonas infection", "correct": true}, {"label": "D", "text": "Pneumococcal infection", "correct": false}], "correct_answer": "C. Pseudomonas infection", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64487301697957920/64487301697957920.m3u8"}, {"text": "Inverted Purkinje image is seen onâ€“", "options": [{"label": "A", "text": "Anterior surface of cornea", "correct": false}, {"label": "B", "text": "Anterior surface of lens", "correct": false}, {"label": "C", "text": "Posterior surface of cornea", "correct": false}, {"label": "D", "text": "Posterior surface of lens", "correct": true}], "correct_answer": "D. Posterior surface of lens", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54213131697957936/54213131697957936.m3u8"}, {"text": "Magnification caused by direct ophthalmoscope is â€“", "options": [{"label": "A", "text": "5 times", "correct": false}, {"label": "B", "text": "15 times", "correct": true}, {"label": "C", "text": "50 times", "correct": false}, {"label": "D", "text": "10 times", "correct": false}], "correct_answer": "B. 15 times", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/68478371697957948/68478371697957948.m3u8"}, {"text": "A lady using contact lens developed photophobia, blurred vision and watery discharge was diagnosed to be suffering from over-wearing syndrome . Most appropriate management is â€“", "options": [{"label": "A", "text": "Avoid use of lens for 48 - 72 hrs", "correct": true}, {"label": "B", "text": "Antibiotic and cycloplegic", "correct": false}, {"label": "C", "text": "Change the contact lens", "correct": false}, {"label": "D", "text": "Send the lens for culture and sensitivity", "correct": false}], "correct_answer": "A. Avoid use of lens for 48 - 72 hrs", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/23816351697957963/23816351697957963.m3u8"}, {"text": "After maximum correction ,the vision of RE is 6/36 and left eye is 6/6 and with 66 cm retinoscopy RE is +4.5 D and LE is 1.5 D with normal fundus. Most likely cause of defect of vision-", "options": [{"label": "A", "text": "Refractive error", "correct": false}, {"label": "B", "text": "Anisometropic Amblyopia", "correct": true}, {"label": "C", "text": "Strabismic Amblyopia", "correct": false}, {"label": "D", "text": "Anisometropia", "correct": false}], "correct_answer": "B. Anisometropic Amblyopia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63245851697957986/63245851697957986.m3u8"}, {"text": "A child was taken to a doctor by his mother complaining that there is decrease in his school performance, his teacher says that he frequently squeezes his eyes and says that there is difficulty in seeing the black board. What is most probable diagnosis-", "options": [{"label": "A", "text": "Myopia", "correct": true}, {"label": "B", "text": "Hypermetropia", "correct": false}, {"label": "C", "text": "Presbyopia", "correct": false}, {"label": "D", "text": "Astigmatism", "correct": false}], "correct_answer": "A. Myopia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77979651697957999/77979651697957999.m3u8"}, {"text": "Basanti, a 20yr old female presents with complaints of difficulty in reading near print. On examination there is ptosis and diplopia on looking in all direction. What is the most probable diagnosis", "options": [{"label": "A", "text": "Lateral rectus palsy", "correct": false}, {"label": "B", "text": "Oculomotor palsy", "correct": false}, {"label": "C", "text": "Presbyopia", "correct": false}, {"label": "D", "text": "Myasthenia gravis", "correct": true}], "correct_answer": "D. Myasthenia gravis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13261961697958013/13261961697958013.m3u8"}, {"text": "Retinoscopy is done on a 0.5 D myopic patient at a distance of 1 metre. Movement of image will be -", "options": [{"label": "A", "text": "Move with the mirror", "correct": true}, {"label": "B", "text": "Move opposite to the mirror", "correct": false}, {"label": "C", "text": "No movement of image with the mirror", "correct": false}, {"label": "D", "text": "Image can move on any side", "correct": false}], "correct_answer": "A. Move with the mirror", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/37489821697958028/37489821697958028.m3u8"}, {"text": "A soft contact lens user has keratitis. Most likely cause is:", "options": [{"label": "A", "text": "Acanthamoeba ulcer", "correct": false}, {"label": "B", "text": "Erosion of cornea", "correct": false}, {"label": "C", "text": "Pseudomonas infection", "correct": true}, {"label": "D", "text": "Herpes infection", "correct": false}], "correct_answer": "C. Pseudomonas infection", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/56252091697958040/56252091697958040.m3u8"}, {"text": "Eye is deviated laterally and downwards, patient is unable to look up or medially, likely nerve involved is:", "options": [{"label": "A", "text": "Trochlear", "correct": false}, {"label": "B", "text": "Trigeminal", "correct": false}, {"label": "C", "text": "Oculomotor", "correct": true}, {"label": "D", "text": "Abducens", "correct": false}], "correct_answer": "C. Oculomotor", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20955081697958074/20955081697958074.m3u8"}, {"text": "Visual acuity is test of:", "options": [{"label": "A", "text": "Light sense", "correct": false}, {"label": "B", "text": "Color sense", "correct": false}, {"label": "C", "text": "Depth perception", "correct": false}, {"label": "D", "text": "Form sense", "correct": true}], "correct_answer": "D. Form sense", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55398691697958092/55398691697958092.m3u8"}, {"text": "Yoke muscles for dextroelevation are:", "options": [{"label": "A", "text": "Right IR and Left SO", "correct": false}, {"label": "B", "text": "Right SR and Left IO", "correct": true}, {"label": "C", "text": "Right SO and Left IR", "correct": false}, {"label": "D", "text": "Right IO and Left SR", "correct": false}], "correct_answer": "B. Right SR and Left IO", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/14197701697958120/14197701697958120.m3u8"}, {"text": "Hirschberg test is used to detect:", "options": [{"label": "A", "text": "Squint", "correct": true}, {"label": "B", "text": "Visual acuity", "correct": false}, {"label": "C", "text": "Retinal defect", "correct": false}, {"label": "D", "text": "Optic neuritis", "correct": false}], "correct_answer": "A. Squint", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/55723011697958172/55723011697958172.m3u8"}, {"text": "Which of the following combination is false:", "options": [{"label": "A", "text": "SR and SO are intorters", "correct": false}, {"label": "B", "text": "SR and IR are adductors", "correct": false}, {"label": "C", "text": "SR and SO are abductors", "correct": true}, {"label": "D", "text": "IR and IO are extorters", "correct": false}], "correct_answer": "C. SR and SO are abductors", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42546281697958188/42546281697958188.m3u8"}, {"text": "Eye achieves adult size by:", "options": [{"label": "A", "text": "1 year", "correct": false}, {"label": "B", "text": "2 year", "correct": false}, {"label": "C", "text": "13 year", "correct": true}, {"label": "D", "text": "4 year", "correct": false}], "correct_answer": "C. 13 year", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19522421697958210/19522421697958210.m3u8"}, {"text": "In a mixed type of accommodative esotropia", "options": [{"label": "A", "text": "Child has normal AC/A but high refractive error", "correct": false}, {"label": "B", "text": "Child has abnormal AC/A ratio and normal refraction", "correct": false}, {"label": "C", "text": "Child has both increased AC/A and increased refraction for age", "correct": true}, {"label": "D", "text": "None of the above", "correct": false}], "correct_answer": "C. Child has both increased AC/A and increased refraction for age", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/77004271697958231/77004271697958231.m3u8"}, {"text": "Which of the following is not a cycloplegic", "options": [{"label": "A", "text": "Phenylephrine", "correct": true}, {"label": "B", "text": "Atropine", "correct": false}, {"label": "C", "text": "Homatropine", "correct": false}, {"label": "D", "text": "Cyclopentolate", "correct": false}], "correct_answer": "A. Phenylephrine", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/66389711697958323/66389711697958323.m3u8"}, {"text": "Secondary deviation follows:", "options": [{"label": "A", "text": "Donders law", "correct": false}, {"label": "B", "text": "Listing law", "correct": false}, {"label": "C", "text": "Heringâ€™s law", "correct": true}, {"label": "D", "text": "Sherringtonâ€™s law", "correct": false}], "correct_answer": "C. Heringâ€™s law", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6273471697958365/6273471697958365.m3u8"}, {"text": "Which of the muscles does not arise from the apex of the orbit:", "options": [{"label": "A", "text": "SO", "correct": false}, {"label": "B", "text": "IO", "correct": true}, {"label": "C", "text": "IR", "correct": false}, {"label": "D", "text": "SR", "correct": false}], "correct_answer": "B. IO", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47519521697958390/47519521697958390.m3u8"}, {"text": "Which instrument is based on the principle of first purkinje images:", "options": [{"label": "A", "text": "Retinoscope", "correct": false}, {"label": "B", "text": "Slit lamp", "correct": false}, {"label": "C", "text": "Cross-Cylinder", "correct": false}, {"label": "D", "text": "Keratometer", "correct": true}], "correct_answer": "D. Keratometer", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/78845711697958408/78845711697958408.m3u8"}, {"text": "Most rapidly acting cycloplegic is;", "options": [{"label": "A", "text": "Atropine", "correct": false}, {"label": "B", "text": "Tropicamide", "correct": true}, {"label": "C", "text": "Homatropine", "correct": false}, {"label": "D", "text": "Cyclopentolate", "correct": false}], "correct_answer": "B. Tropicamide", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/47723551697958446/47723551697958446.m3u8"}, {"text": "Maddox rod is:", "options": [{"label": "A", "text": "Series of fused cylindrical glasses", "correct": true}, {"label": "B", "text": "Series of fused prisms of increasing length", "correct": false}, {"label": "C", "text": "Series of fused prisms of decreasing length", "correct": false}, {"label": "D", "text": "Series of alternating spherical and cylindrical glasses", "correct": false}], "correct_answer": "A. Series of fused cylindrical glasses", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/75192381697958459/75192381697958459.m3u8"}, {"text": "A patient has a spectacle correction of -6D and -8D.He has started seeing some opacities floating in front of his eye and that his vision is decreased in the last few days.What is the best investigation?", "options": [{"label": "A", "text": "Retinoscopy", "correct": false}, {"label": "B", "text": "Refraction", "correct": false}, {"label": "C", "text": "Indirect ophthalmoscopy", "correct": true}, {"label": "D", "text": "Distant direct ophthalmoscopy", "correct": false}], "correct_answer": "C. Indirect ophthalmoscopy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36896621697958478/36896621697958478.m3u8"}, {"text": "If retinoscopy is done at 1m distance,the correction factor used while prescribing the glasses is 1D with retinoscopy performed at a distance of 50cm,the correction factor will be:", "options": [{"label": "A", "text": "2D", "correct": true}, {"label": "B", "text": "1D", "correct": false}, {"label": "C", "text": "1.5D", "correct": false}, {"label": "D", "text": "1D", "correct": false}], "correct_answer": "A. 2D", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/29528621697958501/29528621697958501.m3u8"}, {"text": "Pincushion distortion with aphakic glasses is due to :", "options": [{"label": "A", "text": "Periphery of the lens magnifying more than the centre of the lens", "correct": true}, {"label": "B", "text": "Centre of the lens magnifying more than the periphery of the lens", "correct": false}, {"label": "C", "text": "Thickness of the lens", "correct": false}, {"label": "D", "text": "Size of the lens", "correct": false}], "correct_answer": "A. Periphery of the lens magnifying more than the centre of the lens", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/19359021697958525/19359021697958525.m3u8"}, {"text": "Miotics are used in :", "options": [{"label": "A", "text": "Divergent squint", "correct": false}, {"label": "B", "text": "Convergent squint", "correct": true}, {"label": "C", "text": "Paralytic squint", "correct": false}, {"label": "D", "text": "All", "correct": false}], "correct_answer": "B. Convergent squint", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15335141697958541/15335141697958541.m3u8"}, {"text": "definition of blindness according to WHO :", "options": [{"label": "A", "text": "Less than 1/60", "correct": false}, {"label": "B", "text": "Less than 3/60", "correct": true}, {"label": "C", "text": "Less than 6/60", "correct": false}, {"label": "D", "text": "Less than 6/18", "correct": false}], "correct_answer": "B. Less than 3/60", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/39835171697958555/39835171697958555.m3u8"}, {"text": "A myope with power of -3D will have minification of image by", "options": [{"label": "A", "text": "2%", "correct": false}, {"label": "B", "text": "4%", "correct": false}, {"label": "C", "text": "6%", "correct": true}, {"label": "D", "text": "8%", "correct": false}], "correct_answer": "C. 6%", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64622781697958573/64622781697958573.m3u8"}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(