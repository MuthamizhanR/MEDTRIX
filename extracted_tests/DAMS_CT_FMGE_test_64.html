<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Ophthalmology Fmge</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`ðŸ§  Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Ophthalmology Fmge</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                40 Questions | 160 Total Marks | 50 min Duration | ~75.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 40 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 50 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 40</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Ophthalmology Fmge - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 40</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 40 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "Procedure is done for:", "options": [{"label": "A", "text": "Keratoconus", "correct": true}, {"label": "B", "text": "Keratoglobus", "correct": false}, {"label": "C", "text": "Vogt limbal girdle", "correct": false}, {"label": "D", "text": "Corneal dystrophy", "correct": false}], "correct_answer": "A. Keratoconus", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(843).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Satellite lesions of cornea are caused by:", "options": [{"label": "A", "text": "Bacteria", "correct": false}, {"label": "B", "text": "Fungi", "correct": true}, {"label": "C", "text": "Viruses", "correct": false}, {"label": "D", "text": "Mixed infection", "correct": false}], "correct_answer": "B. Fungi", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Dendritic keratitis is caused by:", "options": [{"label": "A", "text": "Herpes virus", "correct": true}, {"label": "B", "text": "Pseudomonas", "correct": false}, {"label": "C", "text": "Streptococci", "correct": false}, {"label": "D", "text": "Staphylococci", "correct": false}], "correct_answer": "A. Herpes virus", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "The most metabolically active layer of the cornea is", "options": [{"label": "A", "text": "Epithelium", "correct": false}, {"label": "B", "text": "Stroma", "correct": false}, {"label": "C", "text": "Descemetâ€™s membrane", "correct": false}, {"label": "D", "text": "Endothelium", "correct": true}], "correct_answer": "D. Endothelium", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient presents with right sided field defects in both eyes, but central vision remains unaffected. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Homonymous Hemianopia with Macular Sparing", "correct": true}, {"label": "B", "text": "Heteronymous Hemianopia with Central Sparing", "correct": false}, {"label": "C", "text": "Optic Chiasm Lesion", "correct": false}, {"label": "D", "text": "Optic Tract Lesion", "correct": false}], "correct_answer": "A. Homonymous Hemianopia with Macular Sparing", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient presents with vision problems and has a history of cataract surgery. OCT finding is shown below. What is the syndrome most likely associated with these findings?", "options": [{"label": "A", "text": "Posner-Schlossman Syndrome", "correct": false}, {"label": "B", "text": "Irvine-Gass Syndrome", "correct": true}, {"label": "C", "text": "Central Serous Retinopathy", "correct": false}, {"label": "D", "text": "Elschnig Pearls", "correct": false}], "correct_answer": "B. Irvine-Gass Syndrome", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/6(470).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "The cover-uncover test is performed to diagnose various eye conditions. Which of the following is NOT detected by this test?", "options": [{"label": "A", "text": "Latent Squint", "correct": false}, {"label": "B", "text": "Manifest Squint", "correct": false}, {"label": "C", "text": "Latent Nystagmus", "correct": false}, {"label": "D", "text": "Amblyopia", "correct": true}], "correct_answer": "D. Amblyopia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following is a side effect of PG analogue?", "options": [{"label": "A", "text": "Uveitis", "correct": true}, {"label": "B", "text": "Orbital cellulitis", "correct": false}, {"label": "C", "text": "Hyperemia", "correct": false}, {"label": "D", "text": "Keratitis", "correct": false}], "correct_answer": "A. Uveitis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 5 -year-old child presents with a refractive error of +1D in the left eye& -2D in the right eye. . Fundus examination reveals normal visual acuity and retinal findings. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Myopia", "correct": false}, {"label": "B", "text": "Hyperopia", "correct": false}, {"label": "C", "text": "Anisometropia", "correct": true}, {"label": "D", "text": "Amblyopia", "correct": false}], "correct_answer": "C. Anisometropia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient sustained blunt trauma to the eye 6 months ago and now presents with blurring of vision. What is the most likely condition?", "options": [{"label": "A", "text": "Iridodialysis", "correct": true}, {"label": "B", "text": "Ankyloblepharaon", "correct": false}, {"label": "C", "text": "Vossius Ring", "correct": false}, {"label": "D", "text": "Cycloiriditis", "correct": false}], "correct_answer": "A. Iridodialysis", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/10(327).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 5-month-old baby is brought by the mother with complaints of the left upper eyelid moving up and down during breastfeeding or thumb sucking, which disappears when the baby is not being fed. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Marcus Gunn Jaw-Winking Syndrome", "correct": true}, {"label": "B", "text": "Lagophthalmos", "correct": false}, {"label": "C", "text": "Myasthenia Gravis", "correct": false}, {"label": "D", "text": "3rd CN palsy", "correct": false}], "correct_answer": "A. Marcus Gunn Jaw-Winking Syndrome", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient has a history of a flying foreign body injury to the eye. Ocular findings revealed iris pigmentation. Which of the following substances is most likely involved in the deposition?", "options": [{"label": "A", "text": "Iron", "correct": true}, {"label": "B", "text": "Aluminum", "correct": false}, {"label": "C", "text": "Wood", "correct": false}, {"label": "D", "text": "Glass", "correct": false}], "correct_answer": "A. Iron", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following statements is correct regarding indirect ophthalmoscopy?", "options": [{"label": "A", "text": "The image is erect and real.", "correct": false}, {"label": "B", "text": "The condenser lens needs to be kept close to the eye.", "correct": false}, {"label": "C", "text": "It provides 15x magnification.", "correct": false}, {"label": "D", "text": "It provides 3-5x magnification.", "correct": true}], "correct_answer": "D. It provides 3-5x magnification.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient presents with breathlessness and is diagnosed with a Pancoast tumor. Which of the following findings is not typically associated with this condition?", "options": [{"label": "A", "text": "Anhidrosis", "correct": false}, {"label": "B", "text": "Miosis", "correct": false}, {"label": "C", "text": "Ptosis", "correct": false}, {"label": "D", "text": "Exophthalmos", "correct": true}], "correct_answer": "D. Exophthalmos", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient presents with proptosis that increases when bending down. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Orbital Varices", "correct": true}, {"label": "B", "text": "Thyroid Eye Disease", "correct": false}, {"label": "C", "text": "Cavernous Sinus Thrombosis", "correct": false}, {"label": "D", "text": "Orbital Cellulitis", "correct": false}], "correct_answer": "A. Orbital Varices", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient visits emergency with history of trauma and following radiological image is obtaine: What is the diagnosis?", "options": [{"label": "A", "text": "Inferior wall fracture", "correct": true}, {"label": "B", "text": "Orbital cellulitis", "correct": false}, {"label": "C", "text": "Lateral wall fracture", "correct": false}, {"label": "D", "text": "Osteomeatal fracture", "correct": false}], "correct_answer": "A. Inferior wall fracture", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/16(196).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A corneal wisp test was performed, and the corneal reflex was elicited. Which of the following nerves is responsible for the afferent limb of this reflex?", "options": [{"label": "A", "text": "Facial Nerve", "correct": false}, {"label": "B", "text": "Trigeminal Nerve", "correct": true}, {"label": "C", "text": "Oculomotor Nerve", "correct": false}, {"label": "D", "text": "Abducens Nerve", "correct": false}], "correct_answer": "B. Trigeminal Nerve", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Steroids are contraindicated in", "options": [{"label": "A", "text": "Phlyctenular conjunctivitis", "correct": false}, {"label": "B", "text": "Disciform keratitis", "correct": false}, {"label": "C", "text": "Moorenâ€™s ulcer", "correct": false}, {"label": "D", "text": "Dendritic ulcer", "correct": true}], "correct_answer": "D. Dendritic ulcer", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Arcus senilis is due to deposition of", "options": [{"label": "A", "text": "Lipid", "correct": true}, {"label": "B", "text": "Hyaline", "correct": false}, {"label": "C", "text": "Calcium", "correct": false}, {"label": "D", "text": "None", "correct": false}], "correct_answer": "A. Lipid", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Munsonâ€™s sign is positive in", "options": [{"label": "A", "text": "Episcleritis", "correct": false}, {"label": "B", "text": "Retinal detachment", "correct": false}, {"label": "C", "text": "Keratoconus", "correct": true}, {"label": "D", "text": "Cataract", "correct": false}], "correct_answer": "C. Keratoconus", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Pannus in trachoma consists of:", "options": [{"label": "A", "text": "Superficial vascularisation", "correct": false}, {"label": "B", "text": "Deep vascularisation", "correct": false}, {"label": "C", "text": "Lymphocytic infiltration with vascularisation", "correct": true}, {"label": "D", "text": "Hyaline infilteration and elastotic degeneration", "correct": false}], "correct_answer": "C. Lymphocytic infiltration with vascularisation", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Arltâ€™s line is seen in:", "options": [{"label": "A", "text": "Horizontal scar in lower palpebral conjunctiva", "correct": false}, {"label": "B", "text": "Horizontal scar in upper palpebral conjunctiva", "correct": true}, {"label": "C", "text": "Vertical scar in lower palpebral conjunctiva", "correct": false}, {"label": "D", "text": "Vertical scar in upper palpebral conjunctiva", "correct": false}], "correct_answer": "B. Horizontal scar in upper palpebral conjunctiva", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Fascicular ulcer is a feature of", "options": [{"label": "A", "text": "Vernal keratoconjunctivitis", "correct": false}, {"label": "B", "text": "Phlyctenular keratoconjunctivitis", "correct": true}, {"label": "C", "text": "Ophthalmia neonatorum", "correct": false}, {"label": "D", "text": "Xerophthalmia", "correct": false}], "correct_answer": "B. Phlyctenular keratoconjunctivitis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Identify the sign in the given pic?", "options": [{"label": "A", "text": "Kayser Fleisher ring", "correct": false}, {"label": "B", "text": "Vossius ring", "correct": true}, {"label": "C", "text": "Fleisher ring", "correct": false}, {"label": "D", "text": "Weiss ring", "correct": false}], "correct_answer": "B. Vossius ring", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/24(111).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Commonest cause of benign Intra orbital tumor in childhood is", "options": [{"label": "A", "text": "Demoid cyst", "correct": true}, {"label": "B", "text": "Retinoblastoma", "correct": false}, {"label": "C", "text": "Chroidal melanoma", "correct": false}, {"label": "D", "text": "Iris naveus", "correct": false}], "correct_answer": "A. Demoid cyst", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "What is the probable diagnosis of the image?", "options": [{"label": "A", "text": "Moderate Non- Proliferative Diabetic Retinopathy", "correct": true}, {"label": "B", "text": "Proliferative Diabetic Retinopathy", "correct": false}, {"label": "C", "text": "Hypertensive retinopathy", "correct": false}, {"label": "D", "text": "Exudative Age related macular degeneration", "correct": false}], "correct_answer": "A. Moderate Non- Proliferative Diabetic Retinopathy", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/26(83).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "On retinoscopy, X axis is -3.5; Y axis is -1. Homatropine was used, distance 1 meter. What will be the final prescription.", "options": [{"label": "A", "text": "-5.00 D sph, +2.5 D cylinder 180", "correct": true}, {"label": "B", "text": "-2.5 D sph, -3 D cylinder 180", "correct": false}, {"label": "C", "text": "+2.5 D sph, -5 D cyl 180 degree", "correct": false}, {"label": "D", "text": "â€“ 3.5 D sph, +2.5 d cyl 180 degree", "correct": false}], "correct_answer": "A. -5.00 D sph, +2.5 D cylinder 180", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 20 year old patient came to opd with bilateral irritation and itching in eyes,on examination, following picture is obtained, All are true except:", "options": [{"label": "A", "text": "Antibiotic eye drops are to be administered", "correct": true}, {"label": "B", "text": "More common in summers", "correct": false}, {"label": "C", "text": "Corneal ulcer may develop", "correct": false}, {"label": "D", "text": "More common in males", "correct": false}], "correct_answer": "A. Antibiotic eye drops are to be administered", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/28(82).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following is synergistic muscle of Left Lateral rectus?", "options": [{"label": "A", "text": "Right Superior Oblique", "correct": false}, {"label": "B", "text": "Left Inferior Oblique", "correct": true}, {"label": "C", "text": "Left medial rectus", "correct": false}, {"label": "D", "text": "Right lateral rectus", "correct": false}], "correct_answer": "B. Left Inferior Oblique", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Fasanella Servat procedure is done for:", "options": [{"label": "A", "text": "Severe ptosis", "correct": false}, {"label": "B", "text": "Mild ptosis", "correct": true}, {"label": "C", "text": "Cicatricial ptosis", "correct": false}, {"label": "D", "text": "Jaw-Winking phenomenon", "correct": false}], "correct_answer": "B. Mild ptosis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Fundus of a young patient shows pigment along retinal midperiphery and waxy pale disc. The diagnosis is:", "options": [{"label": "A", "text": "Retinitis pigmentosa", "correct": true}, {"label": "B", "text": "Diabetic retinopathy", "correct": false}, {"label": "C", "text": "Central serous retinopathy", "correct": false}, {"label": "D", "text": "Lattice degeneration of retina", "correct": false}], "correct_answer": "A. Retinitis pigmentosa", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/31(66).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 40 year old female visits eye OPD with Acute congestive glaucoma. On examination, Cornea is hazy, ciliary congestion, Shallow Anterior chamber. What will be the best treatment in this patient?", "options": [{"label": "A", "text": "Laser iridotomy", "correct": false}, {"label": "B", "text": "Latanoprost", "correct": false}, {"label": "C", "text": "Peripheral iridectomy", "correct": true}, {"label": "D", "text": "Goniotomy", "correct": false}], "correct_answer": "C. Peripheral iridectomy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "What is the treatment of choice in a 2 year patient with Presence of buphthalmos and haab striae?", "options": [{"label": "A", "text": "Start Dorzolamide", "correct": false}, {"label": "B", "text": "Goniotomy", "correct": false}, {"label": "C", "text": "Trabeculectomy", "correct": false}, {"label": "D", "text": "Combined trabeculectomy & Trabeculotomy", "correct": true}], "correct_answer": "D. Combined trabeculectomy & Trabeculotomy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Manifest blindness is:", "options": [{"label": "A", "text": "Va 3/60-6/60", "correct": false}, {"label": "B", "text": "Va 3/60-1/60", "correct": false}, {"label": "C", "text": "PR PL Negative", "correct": false}, {"label": "D", "text": "Va< 1/60", "correct": true}], "correct_answer": "D. Va< 1/60", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "WOF is correct:", "options": [{"label": "A", "text": "Riders are seen", "correct": false}, {"label": "B", "text": "Vision <6/60", "correct": true}, {"label": "C", "text": "Phacoemulsification is done", "correct": false}, {"label": "D", "text": "M/c congenital cataract", "correct": false}], "correct_answer": "B. Vision <6/60", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/35(60).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "The following chart is used to detect:", "options": [{"label": "A", "text": "Near vision in adults", "correct": false}, {"label": "B", "text": "Visual acuity in children", "correct": false}, {"label": "C", "text": "Contrast sensitivity", "correct": true}, {"label": "D", "text": "Amblyopia in children", "correct": false}], "correct_answer": "C. Contrast sensitivity", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/36(67).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which sign do you see?", "options": [{"label": "A", "text": "Von graefe sign", "correct": false}, {"label": "B", "text": "Dalrymple sign", "correct": true}, {"label": "C", "text": "Stellwag sign", "correct": false}, {"label": "D", "text": "Hutchinson sign", "correct": false}], "correct_answer": "B. Dalrymple sign", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/37(56).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Shape of the orbit is:", "options": [{"label": "A", "text": "Square", "correct": false}, {"label": "B", "text": "Rectangle", "correct": false}, {"label": "C", "text": "Pyramidal", "correct": true}, {"label": "D", "text": "Triangular", "correct": false}], "correct_answer": "C. Pyramidal", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "6 days after cataract surgery, the patient visits eye opd with complaint of sudden painful loss of vision. The following image is seen. How will you manage", "options": [{"label": "A", "text": "Topical antibiotics", "correct": false}, {"label": "B", "text": "Topical steroids", "correct": false}, {"label": "C", "text": "Intravitreal Antibiotics", "correct": true}, {"label": "D", "text": "Intrastromal antibiotic", "correct": false}], "correct_answer": "C. Intravitreal Antibiotics", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/39(46).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Enculeation means", "options": [{"label": "A", "text": "Removal of contents of globe", "correct": false}, {"label": "B", "text": "Removal of the content of the globe and all of sclera except for a frill around the optic nerve", "correct": false}, {"label": "C", "text": "Removal of entire globe along with a portion of optic nerve", "correct": true}, {"label": "D", "text": "Removal of the entire contents of orbit", "correct": false}], "correct_answer": "C. Removal of entire globe along with a portion of optic nerve", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(