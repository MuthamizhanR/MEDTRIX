<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Surgery Giturology Fmge</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`üß† Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Surgery Giturology Fmge</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                40 Questions | 160 Total Marks | 50 min Duration | ~75.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 40 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 50 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 40</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Surgery Giturology Fmge - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 40</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 40 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "False statement regarding Zanker‚Äôs diverticulum is:", "options": [{"label": "A", "text": "It is a type of traction diverticulum.", "correct": true}, {"label": "B", "text": "It arises from the posterior hypopharynx.", "correct": false}, {"label": "C", "text": "The diagnostic test is Ba. Swallow.", "correct": false}, {"label": "D", "text": "Usual surgical treatment is diverticulectomy with cricopharyngeal myotomy.", "correct": false}], "correct_answer": "A. It is a type of traction diverticulum.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A Patient of Tracheo-esophageal fistula with good birth weight and no pneumonia is best treated by?", "options": [{"label": "A", "text": "Urgent initial tracheostomy to prevent aspiration then definitive curative thoracotomy.", "correct": false}, {"label": "B", "text": "Initial Total Parenteral nutrition then curative thoracotomy.", "correct": false}, {"label": "C", "text": "Initial feeding gastrostomy and treatment of pneumonia then definitive thoracotomy.", "correct": false}, {"label": "D", "text": "Immediate 5th intercostals thoracotomy and repair.", "correct": true}], "correct_answer": "D. Immediate 5th intercostals thoracotomy and repair.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "While attempting the removal of foreign body from lower esophagus by rigid endoscope, the patient complains of severe pain in abdomen and central chest. After the procedure X-ray showed pneumoperitoneum and pneumomediastinum. Best treatment for this patient is?", "options": [{"label": "A", "text": "Antibiotics/ IV Fluids and Nil orally (Conservative Treatment).", "correct": false}, {"label": "B", "text": "Only in case of no response by conservative treatment and deterioration, Suregry should be done.", "correct": false}, {"label": "C", "text": "Antibiotics (Broad spectrum aerobic and anaerobic)/ IV Fluids with liquid diet for 4 weeks.", "correct": false}, {"label": "D", "text": "Immediate surgery.", "correct": true}], "correct_answer": "D. Immediate surgery.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Best palliative treatment for malignant tracheo-esophageal fistula is?", "options": [{"label": "A", "text": "Expanding metallic stents.", "correct": true}, {"label": "B", "text": "Surgical bypass.", "correct": false}, {"label": "C", "text": "Radiotherapy", "correct": false}, {"label": "D", "text": "Chemotherapy", "correct": false}], "correct_answer": "A. Expanding metallic stents.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following is not true about tracheo-esophageal fistula?", "options": [{"label": "A", "text": "It is common with down‚Äôs syndrome.", "correct": false}, {"label": "B", "text": "Commonest type is pure esophageal atrasia.", "correct": true}, {"label": "C", "text": "May be associated with polyhydroamnios.", "correct": false}, {"label": "D", "text": "Primary measure includes decreasing risk of aspiration.", "correct": false}], "correct_answer": "B. Commonest type is pure esophageal atrasia.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 50 year old male after heavy meal went for walk. He developed severe chest pain associated with vomiting. He was brought to Emergency room and CT scan revealed pneumomediastinum. Most probable diagnosis in this patient is?", "options": [{"label": "A", "text": "Acute MI with myocardial rupture", "correct": false}, {"label": "B", "text": "Rupture of emphysematous bullae.", "correct": false}, {"label": "C", "text": "Boerhaave‚Äôs syndrome.", "correct": true}, {"label": "D", "text": "Mallory weis syndrome", "correct": false}], "correct_answer": "C. Boerhaave‚Äôs syndrome.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Sideropenic dysphagea is?", "options": [{"label": "A", "text": "Plummer Vinson syndrome.", "correct": true}, {"label": "B", "text": "Schatzki‚Äôs ring.", "correct": false}, {"label": "C", "text": "Caused by moniliasis.", "correct": false}, {"label": "D", "text": "Associated with Crohn‚Äôs disease.", "correct": false}], "correct_answer": "A. Plummer Vinson syndrome.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement about Mellory Weiss syndrome is?", "options": [{"label": "A", "text": "Mainly caused by vomiting or retching.", "correct": false}, {"label": "B", "text": "It is a submucosa deep tear.", "correct": false}, {"label": "C", "text": "Epigastric pain is the main presenting symptom.", "correct": true}, {"label": "D", "text": "Mainly managed by conservative means.", "correct": false}], "correct_answer": "C. Epigastric pain is the main presenting symptom.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Most common site of esophageal carcinoma is?", "options": [{"label": "A", "text": "Upper third.", "correct": false}, {"label": "B", "text": "Middle third.", "correct": false}, {"label": "C", "text": "Lower third.", "correct": true}, {"label": "D", "text": "Equally distributed", "correct": false}], "correct_answer": "C. Lower third.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "In which type of gastritis incidence of cancer is maximum?", "options": [{"label": "A", "text": "Type A Gastritis", "correct": true}, {"label": "B", "text": "Type B Gastritis.", "correct": false}, {"label": "C", "text": "Erosive", "correct": false}, {"label": "D", "text": "Stress", "correct": false}], "correct_answer": "A. Type A Gastritis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement about highly selective vagotomy is?", "options": [{"label": "A", "text": "Nerve of Latarjet is preserved.", "correct": false}, {"label": "B", "text": "Anterior and posterior vagus nerves are preserved but its branched are devided.", "correct": false}, {"label": "C", "text": "The recurrence rate is less than truncal vagotomy.", "correct": true}, {"label": "D", "text": "Higher incidence of cancer observed after truncal vagotomy is not seen after highly selective vagotomy.", "correct": false}], "correct_answer": "C. The recurrence rate is less than truncal vagotomy.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement about congenital hypertrophic pyloric stenosis is?", "options": [{"label": "A", "text": "Incidence is 3 per 1000.", "correct": false}, {"label": "B", "text": "Commonly presents 4 weeks after birth.", "correct": false}, {"label": "C", "text": "USG is investigation of choice.", "correct": false}, {"label": "D", "text": "Pyeloroplasty is treatment of choice.", "correct": true}], "correct_answer": "D. Pyeloroplasty is treatment of choice.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Regarding peptic ulceration false statement is?", "options": [{"label": "A", "text": "Duodenal is more common than gastric ulceration.", "correct": false}, {"label": "B", "text": "H2-blockers will heal 85-95% of duodenal ulcers in 8 weeks", "correct": false}, {"label": "C", "text": "Triple therapy can eradicate H. pylori in 80% of patients in one week", "correct": false}, {"label": "D", "text": "H. pylori is a gram-positive bacillus", "correct": true}], "correct_answer": "D. H. pylori is a gram-positive bacillus", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 45 year old male executive is having frank hematemesis. There is no significant past history except for occasional history of upper abdomen dyspeptic pain. He admits to have one drink a week. He has already bled 5 units of blood. What do you expect to find in upper GI endoscopy?", "options": [{"label": "A", "text": "Mallory weiss tear.", "correct": false}, {"label": "B", "text": "Esophageal varices", "correct": false}, {"label": "C", "text": "Gastric ulcer.", "correct": false}, {"label": "D", "text": "Duodenal ulcer.", "correct": true}], "correct_answer": "D. Duodenal ulcer.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following type best defines early gastric cancer?", "options": [{"label": "A", "text": "A proliferative gastric cancer.", "correct": false}, {"label": "B", "text": "A infiltrative gastric cancer.", "correct": false}, {"label": "C", "text": "Gastric cancer in mucosa or submucosa with or without nodes.", "correct": true}, {"label": "D", "text": "Gastric cancer upto muscle but not involving nodes", "correct": false}], "correct_answer": "C. Gastric cancer in mucosa or submucosa with or without nodes.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Best prognosis in stomach cancer is seen in?", "options": [{"label": "A", "text": "Colloid cancer", "correct": false}, {"label": "B", "text": "Linitis plastic", "correct": false}, {"label": "C", "text": "Superficial spreading", "correct": false}, {"label": "D", "text": "GIST", "correct": true}], "correct_answer": "D. GIST", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Best treatment for a 5 cm cancer situated at the fundus of stomach with 2 positive nodes is?", "options": [{"label": "A", "text": "Billroth I Gastrectomy", "correct": false}, {"label": "B", "text": "Billroth II gastrectomy.", "correct": false}, {"label": "C", "text": "Total gastrectomy with Roux en Y esophagojejunostomy", "correct": true}, {"label": "D", "text": "Only Radiotherapy and chemotherapy (Nigro‚Äôs regimen).", "correct": false}], "correct_answer": "C. Total gastrectomy with Roux en Y esophagojejunostomy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which is false for GIST (Gastro intestinal stromal tumor) of stomach?", "options": [{"label": "A", "text": "CECT is IOC.", "correct": false}, {"label": "B", "text": "Origin is from cells of Kultichisky", "correct": true}, {"label": "C", "text": "CD 117 is then main marker", "correct": false}, {"label": "D", "text": "Imatinab is a new effective drug for adjuvant therapy.", "correct": false}], "correct_answer": "B. Origin is from cells of Kultichisky", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Most common type of gastric volvulus is?", "options": [{"label": "A", "text": "Organoaxial", "correct": true}, {"label": "B", "text": "Mesentricoaxial", "correct": false}, {"label": "C", "text": "Incidence is equal for both", "correct": false}, {"label": "D", "text": "Combined", "correct": false}], "correct_answer": "A. Organoaxial", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement regarding duodenal atresia is?", "options": [{"label": "A", "text": "Plain X ray shows double bubble sign.", "correct": false}, {"label": "B", "text": "Commonest presenting symptom is bilious vomiting few hours after birth.", "correct": false}, {"label": "C", "text": "Obstetrical Ultrasound shows oligohydroamnios (In 50%).", "correct": true}, {"label": "D", "text": "Treatment of choice is Doudeno-duodenostomy.", "correct": false}], "correct_answer": "C. Obstetrical Ultrasound shows oligohydroamnios (In 50%).", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A perforated duodenal ulcer is closed by?", "options": [{"label": "A", "text": "Omental patch with absorbable suture.", "correct": true}, {"label": "B", "text": "Omental patch with non absorbable sutures.", "correct": false}, {"label": "C", "text": "Primary closure in2 layers.", "correct": false}, {"label": "D", "text": "Primary closure in 1 layer.", "correct": false}], "correct_answer": "A. Omental patch with absorbable suture.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A child presented with small bowel bleed due to bleeding ulcer adjacent to Meckle‚Äôs diverticulum. Best treatment for him should be?", "options": [{"label": "A", "text": "Resection and anastomosis (Including ulcer and diverticulum both).", "correct": true}, {"label": "B", "text": "Wedge resection of ulcer only.", "correct": false}, {"label": "C", "text": "Diverticulectomy with wedge resection of ulcer.", "correct": false}, {"label": "D", "text": "Angioembolization of bleeding vessel of the ulcer.", "correct": false}], "correct_answer": "A. Resection and anastomosis (Including ulcer and diverticulum both).", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Multiple air fluid level is not seen in?", "options": [{"label": "A", "text": "Duodenal atresia.", "correct": true}, {"label": "B", "text": "Post-op adhesive intestinal obstruction.", "correct": false}, {"label": "C", "text": "Stricture of terminal ileum.", "correct": false}, {"label": "D", "text": "Obstructed inguinal hernia (without strangulation).", "correct": false}], "correct_answer": "A. Duodenal atresia.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following is false regarding Hirschsprung‚Äôs disease?", "options": [{"label": "A", "text": "It is characterized by a dilated proximal segment and a spastic distal segment joined together by a funnel shaped transition zone.", "correct": false}, {"label": "B", "text": "There is absence of intramural and submucosal ganglion.", "correct": false}, {"label": "C", "text": "There is absence of nerve in affected segment.", "correct": true}, {"label": "D", "text": "Aganglionic segment show increase in enzyme Acetylcholinestrase activity.", "correct": false}], "correct_answer": "C. There is absence of nerve in affected segment.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Least common position of appendix is?", "options": [{"label": "A", "text": "Retrocaecal", "correct": false}, {"label": "B", "text": "Preileal", "correct": false}, {"label": "C", "text": "Retroileal (Post ileal).", "correct": true}, {"label": "D", "text": "Pelvic", "correct": false}], "correct_answer": "C. Retroileal (Post ileal).", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 17 yr old boy was treated by a GP for pain right iliac fossa by antibiotic and analgesic. His symptoms did not improve after 3 days and due to recurrent vomiting and persistence of pain he attended ER. On examination his PR was 102/ min, temp was 100.4 F and there was a palpable tender lump in RIF. USG revealed a mass of 3 √ó 4 cm in size and no fluid in pouch of Duglus. No obvious evidence of abscess was there. Ideal treatment for this patient is?", "options": [{"label": "A", "text": "Conservative.", "correct": true}, {"label": "B", "text": "Appendicectomy through grid iron incision.", "correct": false}, {"label": "C", "text": "Appendicectomy through exploratory laparotomy suspecting appendicular perforation.", "correct": false}, {"label": "D", "text": "Laparoscopic appendicectomy.", "correct": false}], "correct_answer": "A. Conservative.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 42 yr old lady with past history of hysterectomy 4 years back presents to the emergency department with abdominal pain and vomiting. On examination bowel sounds were increased and X ray showed multiple air fluid level. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Small bowel cancer.", "correct": false}, {"label": "B", "text": "Ca colon.", "correct": false}, {"label": "C", "text": "Diverticulitis", "correct": false}, {"label": "D", "text": "Adhesion", "correct": true}], "correct_answer": "D. Adhesion", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Most premalignant condition for colonic cancer is?", "options": [{"label": "A", "text": "Peutz Jegher‚Äôs syndrome.", "correct": false}, {"label": "B", "text": "FAP", "correct": true}, {"label": "C", "text": "Turcot‚Äôs Syndrome.", "correct": false}, {"label": "D", "text": "Cronkehite Canada Sydrome.", "correct": false}], "correct_answer": "B. FAP", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "In a patient with H/O of bleeding PR, colonoscopy showed a 2 cm mass in left colon. Postoperative histopathological finding was tumour infiltrating in muscle with intact serosa and 2 positive lymph nodes (Dukes C 1). Now best further treatment for this patient will be?", "options": [{"label": "A", "text": "Chemotherapy (Adjuvant 5 FU based).", "correct": true}, {"label": "B", "text": "Chemo and Radiotherapy", "correct": false}, {"label": "C", "text": "Only Radiotherapy.", "correct": false}, {"label": "D", "text": "Regular follow up and no further treatment as serosa is intact and Duke stage is C1", "correct": false}], "correct_answer": "A. Chemotherapy (Adjuvant 5 FU based).", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Ideal treatment for a low type of fistula in ano 2.5 cms from anal verge is?", "options": [{"label": "A", "text": "Seton wiring.", "correct": false}, {"label": "B", "text": "Colostomy and second stage fistula surgery (as it is > 2 cm from anal verge)", "correct": false}, {"label": "C", "text": "Fistulotomy", "correct": true}, {"label": "D", "text": "Fistulectomy", "correct": false}], "correct_answer": "C. Fistulotomy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 75 yrs old lady presented to ER with H/O chronic constipation, pain abdomen and obstipation for 1 day. Abdomen was grossly distended and tympanetic on percussion. X ray abdomen showed ‚ÄúOMEGA sign‚Äù. Next step in management should be?", "options": [{"label": "A", "text": "CECT abdomen.", "correct": false}, {"label": "B", "text": "Ba enema.", "correct": false}, {"label": "C", "text": "Sigmoidoscopy", "correct": true}, {"label": "D", "text": "Exploratory laparotomy", "correct": false}], "correct_answer": "C. Sigmoidoscopy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Nigro‚Äôs regimen of chemo-radiation is used for?", "options": [{"label": "A", "text": "Carcinoma anal canal.", "correct": true}, {"label": "B", "text": "Carcinoma Rectum.", "correct": false}, {"label": "C", "text": "Carcinoma sigmoid colon.", "correct": false}, {"label": "D", "text": "Carcinoma Caecum.", "correct": false}], "correct_answer": "A. Carcinoma anal canal.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement about pilonidal sinus is?", "options": [{"label": "A", "text": "Common in young males.", "correct": false}, {"label": "B", "text": "Presents as opening in natal cleft.", "correct": false}, {"label": "C", "text": "Hair tufts are seen through the opening with hair follicles and hair roots in histopathology.", "correct": true}, {"label": "D", "text": "Surgical excision is the treatment of choice.", "correct": false}], "correct_answer": "C. Hair tufts are seen through the opening with hair follicles and hair roots in histopathology.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Transverse skin crease incision for appendicectomy is called?", "options": [{"label": "A", "text": "Grid iron incision.", "correct": false}, {"label": "B", "text": "Rutherford Morrison incision.", "correct": false}, {"label": "C", "text": "Lanz incision.", "correct": true}, {"label": "D", "text": "McArthur incision.", "correct": false}], "correct_answer": "C. Lanz incision.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Best treatment for a case of colonic diverticulosis presenting as perforation is?", "options": [{"label": "A", "text": "Hartmann‚Äôs procedure.", "correct": true}, {"label": "B", "text": "Left hemicolectomy and end to end anastomosis", "correct": false}, {"label": "C", "text": "Primary closure of perforation in 2 layers.", "correct": false}, {"label": "D", "text": "Total procto-coloectomy.", "correct": false}], "correct_answer": "A. Hartmann‚Äôs procedure.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Commonest type of intussusception is?", "options": [{"label": "A", "text": "ileo-ileal.", "correct": false}, {"label": "B", "text": "Ileo-colic.", "correct": true}, {"label": "C", "text": "Colo-colic.", "correct": false}, {"label": "D", "text": "Colo-rectal", "correct": false}], "correct_answer": "B. Ileo-colic.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Best investigation for Meckle‚Äôs with hemorrhage is?", "options": [{"label": "A", "text": "Tc 99 pertechnetate scan.", "correct": true}, {"label": "B", "text": "USG", "correct": false}, {"label": "C", "text": "Ba meal follow through.", "correct": false}, {"label": "D", "text": "CT scan.", "correct": false}], "correct_answer": "A. Tc 99 pertechnetate scan.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "All are true regarding inguinal canal except", "options": [{"label": "A", "text": "Roof is formed by conjoint tendon", "correct": false}, {"label": "B", "text": "Deep inguinal ring is formed by transverse abdominus muscle.", "correct": true}, {"label": "C", "text": "Superficial inguinal ring is formed by ext. obliq. Muscle/ apponeurosis.", "correct": false}, {"label": "D", "text": "Int. obliq muscle forms anterior and post. wall", "correct": false}], "correct_answer": "B. Deep inguinal ring is formed by transverse abdominus muscle.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "The femoral canal", "options": [{"label": "A", "text": "Lies lateral to the femoral vein", "correct": false}, {"label": "B", "text": "Has the inguinal ligament as its poeterior border", "correct": false}, {"label": "C", "text": "Has the lacunar ligament as its lateral border", "correct": false}, {"label": "D", "text": "Has the pectineal ligament as its posterior border", "correct": true}], "correct_answer": "D. Has the pectineal ligament as its posterior border", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "False statement regarding Bochdalek hernia is?", "options": [{"label": "A", "text": "More common in boys.", "correct": false}, {"label": "B", "text": "It is the commonest type of congenital diaphragmatic hernia.", "correct": false}, {"label": "C", "text": "More common on the left side.", "correct": false}, {"label": "D", "text": "More common on the anterior part (retrosternal).", "correct": true}], "correct_answer": "D. More common on the anterior part (retrosternal).", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(