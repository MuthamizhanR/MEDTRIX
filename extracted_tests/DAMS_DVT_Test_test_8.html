<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Medicine  2  Dvt Revision Test</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`ðŸ§  Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Medicine  2  Dvt Revision Test</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                50 Questions | 200 Total Marks | 60 min Duration | ~72.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 50 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 60 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 50</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Medicine  2  Dvt Revision Test - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 50</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 50 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "Calculate the total sodium deficit in 70kg man with serum sodium of 120 meq /L", "options": [{"label": "A", "text": "280", "correct": false}, {"label": "B", "text": "420", "correct": false}, {"label": "C", "text": "840", "correct": true}, {"label": "D", "text": "1400", "correct": false}], "correct_answer": "C. 840", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient is k/c/o Mitral stenosis and developed irregularly irregular pulse. Trans esophageal echocardiography is done but there was no thrombus in left atria. What will be done to prevent stroke", "options": [{"label": "A", "text": "Aspirin", "correct": false}, {"label": "B", "text": "Oral anticoagulants", "correct": true}, {"label": "C", "text": "Heparin", "correct": false}, {"label": "D", "text": "Aspirin+ clopidogrel", "correct": false}], "correct_answer": "B. Oral anticoagulants", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A chronic alcoholic patient with abdominal distension presented with serum creatinine 1.8 mg/dl. Icterus present. BP-130/80 mmHg. Which can be given next?", "options": [{"label": "A", "text": "0.9%NS iv infusion", "correct": false}, {"label": "B", "text": "Thiazide", "correct": false}, {"label": "C", "text": "Torsemide", "correct": false}, {"label": "D", "text": "Terlipressin with albumin", "correct": true}], "correct_answer": "D. Terlipressin with albumin", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient presented with fatigue and palpitations. He has prominent a wave on JVP and mid diastolic murmur at left lower parasternal area. Likely cause of this presentation", "options": [{"label": "A", "text": "Mitral stenosis", "correct": false}, {"label": "B", "text": "Tricuspid stenosis", "correct": true}, {"label": "C", "text": "Mitral regurgitation", "correct": false}, {"label": "D", "text": "Tricuspid regurgitation", "correct": false}], "correct_answer": "B. Tricuspid stenosis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Patient with recurrent substernal discomfort and pain. Pain relieved on giving sublingual nitrate nitroglycerin twice. He is known case of diabetes, hypertension and dyslipidemia and on medication- aspirin, clopidogrel, metoprolol, statins and metformin. ECG shows ST depression. Troponin T is normal. What to do next?", "options": [{"label": "A", "text": "IV nitroglycerin", "correct": false}, {"label": "B", "text": "Increase metoprolol", "correct": false}, {"label": "C", "text": "Enoxaparin", "correct": true}, {"label": "D", "text": "Add warfarin", "correct": false}], "correct_answer": "C. Enoxaparin", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A patient after treatment for hypertension presented with angioedema. Which of the following drug must have been started", "options": [{"label": "A", "text": "Lisinopril", "correct": true}, {"label": "B", "text": "Atenolol", "correct": false}, {"label": "C", "text": "Clonidine", "correct": false}, {"label": "D", "text": "Nifedipine", "correct": false}], "correct_answer": "A. Lisinopril", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A software engineer works continuously for 12-14 hours and orders junk food and lacks fruits and vegetables in diet. MCV 120 fl.Most likely deficiency", "options": [{"label": "A", "text": "B1", "correct": false}, {"label": "B", "text": "Folate", "correct": true}, {"label": "C", "text": "Iron", "correct": false}, {"label": "D", "text": "Methylcobalamine", "correct": false}], "correct_answer": "B. Folate", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Patient presented with chest pain. ECG showed ST-T changes . Which is the best diagnostic step in this emergency scenario?", "options": [{"label": "A", "text": "Transesophageal echo", "correct": false}, {"label": "B", "text": "Transthoracic echo", "correct": false}, {"label": "C", "text": "Cardiac markers", "correct": true}, {"label": "D", "text": "CT angiography", "correct": false}], "correct_answer": "C. Cardiac markers", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Patient with these skin changes, what other symptom will be present", "options": [{"label": "A", "text": "Diarrhea", "correct": true}, {"label": "B", "text": "Edema", "correct": false}, {"label": "C", "text": "Wheezing", "correct": false}, {"label": "D", "text": "Jaundice", "correct": false}], "correct_answer": "A. Diarrhea", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/59(62).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "MELD score include all except", "options": [{"label": "A", "text": "Creatinine", "correct": false}, {"label": "B", "text": "Bilirubin", "correct": false}, {"label": "C", "text": "INR", "correct": false}, {"label": "D", "text": "Albumin", "correct": true}], "correct_answer": "D. Albumin", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "In NSTEMI which drug is not given", "options": [{"label": "A", "text": "Aspirin", "correct": false}, {"label": "B", "text": "Streptokinase", "correct": true}, {"label": "C", "text": "Prasugrel", "correct": false}, {"label": "D", "text": "Clopidogrel", "correct": false}], "correct_answer": "B. Streptokinase", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30 year old female postpartum acute renal failure with Na- 135 mEq/L, k- 6.6 mEq/L and Cl-105 mEq/L and blood glucose of 150 mg/dl. ECG-normal. Next step?", "options": [{"label": "A", "text": "IV fluids NS", "correct": false}, {"label": "B", "text": "Insulin+ dextrose", "correct": false}, {"label": "C", "text": "Calcitonin", "correct": false}, {"label": "D", "text": "Ca gluconate", "correct": true}], "correct_answer": "D. Ca gluconate", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Resistant hypertension is", "options": [{"label": "A", "text": "BP more than 160/90 on 3 or more drugs", "correct": false}, {"label": "B", "text": "BP more than 140/90 on 3 or more drugs", "correct": true}, {"label": "C", "text": "BP more than 160/90 on 1 drug", "correct": false}, {"label": "D", "text": "BP more than 140/90 on 1 drug", "correct": false}], "correct_answer": "B. BP more than 140/90 on 3 or more drugs", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Celiac disease true statement", "options": [{"label": "A", "text": "Steatorrhea present", "correct": false}, {"label": "B", "text": "D xylose abnormal", "correct": false}, {"label": "C", "text": "No vitamin B12 deficiency", "correct": false}, {"label": "D", "text": "All", "correct": true}], "correct_answer": "D. All", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Patient comes with palpitations to ER. Pulse-180/min, SBP- 70mm Hg systolic. ECG shows narrow qrs complex tachycardia with regular heart rate. What is the next step in management?", "options": [{"label": "A", "text": "DC Cardioversion", "correct": true}, {"label": "B", "text": "Adenosine", "correct": false}, {"label": "C", "text": "IV Fluids", "correct": false}, {"label": "D", "text": "Inotropes", "correct": false}], "correct_answer": "A. DC Cardioversion", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A young basket ball player while playing c/o palpitations, dyspnea. On ECHO â€“Systolic anterior movement of mitral valve leaflet and LVH seen. What is the diagnosis", "options": [{"label": "A", "text": "Dilated CMP", "correct": false}, {"label": "B", "text": "Restrictive CMP", "correct": false}, {"label": "C", "text": "HOCM", "correct": true}, {"label": "D", "text": "Ischemic heart disease", "correct": false}], "correct_answer": "C. HOCM", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Patient of hepatitis B recovered from infection.Name the serological marker A. Anti Hbc IgG . B. Anti Hbs C. HbsAG D. Anti Hbe IgG", "options": [{"label": "A", "text": "A, B", "correct": true}, {"label": "B", "text": "C, D", "correct": false}, {"label": "C", "text": "B, C", "correct": false}, {"label": "D", "text": "A, D", "correct": false}], "correct_answer": "A. A, B", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "COPD patient with tachycardia. ECG given. What is the arrythmia", "options": [{"label": "A", "text": "Atrial fibrillation", "correct": false}, {"label": "B", "text": "Atrial flutter", "correct": false}, {"label": "C", "text": "Multifocal atrial tachycardia", "correct": true}, {"label": "D", "text": "Ventricular tachycardia", "correct": false}], "correct_answer": "C. Multifocal atrial tachycardia", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/68(54).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "All drugs used in heart failure except", "options": [{"label": "A", "text": "Dapagliflozin", "correct": false}, {"label": "B", "text": "Trimetazidine", "correct": true}, {"label": "C", "text": "Metoprolol", "correct": false}, {"label": "D", "text": "Sacubitril", "correct": false}], "correct_answer": "B. Trimetazidine", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "How to differentiate tamponade from tension pneumothorax", "options": [{"label": "A", "text": "Low volume pulse", "correct": false}, {"label": "B", "text": "Breath sounds present", "correct": true}, {"label": "C", "text": "Distended veins", "correct": false}, {"label": "D", "text": "No response to iv fluids", "correct": false}], "correct_answer": "B. Breath sounds present", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "SAAG >1.1 with ascites total protein 2.0 g/dl is due to", "options": [{"label": "A", "text": "Cirrhosis", "correct": true}, {"label": "B", "text": "Budd Chiari syndrome", "correct": false}, {"label": "C", "text": "CHF", "correct": false}, {"label": "D", "text": "TB", "correct": false}], "correct_answer": "A. Cirrhosis", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Raised JVP with low PCWP seen in which type of shocK", "options": [{"label": "A", "text": "Hypovolumic", "correct": false}, {"label": "B", "text": "Cardiogenic", "correct": false}, {"label": "C", "text": "Septic", "correct": false}, {"label": "D", "text": "Obstructive", "correct": true}], "correct_answer": "D. Obstructive", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Specific marker of alcoholic liver disease is", "options": [{"label": "A", "text": "SGPT", "correct": false}, {"label": "B", "text": "SGOT", "correct": false}, {"label": "C", "text": "GGT", "correct": true}, {"label": "D", "text": "Prothrombin time", "correct": false}], "correct_answer": "C. GGT", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Epsilon wave in ECG seen in", "options": [{"label": "A", "text": "ARVD", "correct": true}, {"label": "B", "text": "HOCM", "correct": false}, {"label": "C", "text": "Cardiac amyloidosis", "correct": false}, {"label": "D", "text": "Tako Tsubo CMP", "correct": false}], "correct_answer": "A. ARVD", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Pulsus paradoxus is more commonly seen in", "options": [{"label": "A", "text": "Constrictive pericarditis", "correct": false}, {"label": "B", "text": "Tamponade", "correct": true}, {"label": "C", "text": "Restrictive cardiomyopathy", "correct": false}, {"label": "D", "text": "MI", "correct": false}], "correct_answer": "B. Tamponade", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 58/M with a smoking history of 30 pack- years present to the emergency department after an episode of acute chest pain and shortness of breath. On physical examination, there is marked reduction of the breath sounds in the left hemithorax and tympanic note on percussion. Diagnosis?", "options": [{"label": "A", "text": "Bacterial pneumonia", "correct": false}, {"label": "B", "text": "Pneumothorax", "correct": true}, {"label": "C", "text": "Bronchial Obstruction", "correct": false}, {"label": "D", "text": "Pleural effusion", "correct": false}], "correct_answer": "B. Pneumothorax", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Identify the abnormality", "options": [{"label": "A", "text": "Lung abscess", "correct": false}, {"label": "B", "text": "Hydropneumothorax", "correct": true}, {"label": "C", "text": "Consolidation", "correct": false}, {"label": "D", "text": "Pneumothorax", "correct": false}], "correct_answer": "B. Hydropneumothorax", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/77(21).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 65-year-old man smoker seeks medical attention for breathlessness on exertion. Physical examination reveals him to be tachypneic as he exhales through pursed lips. Chest x-ray is given. Expected results of the pulmonary function testing of the man described above would include", "options": [{"label": "A", "text": "Increased FeV1", "correct": false}, {"label": "B", "text": "Decreased Fev1 / FVC ratio", "correct": true}, {"label": "C", "text": "Reduced functional residual capacity", "correct": false}, {"label": "D", "text": "Increased vital capacity", "correct": false}], "correct_answer": "B. Decreased Fev1 / FVC ratio", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/78(13).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "All of the following are expected Spirometry changes in Kyphosocoliosis except:", "options": [{"label": "A", "text": "TLC", "correct": false}, {"label": "B", "text": "Normal RV", "correct": false}, {"label": "C", "text": "FVC", "correct": true}, {"label": "D", "text": "Normal FEV1/FVC ratio", "correct": false}], "correct_answer": "C. FVC", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 24-year-old woman is brought to the emergency room after attempting suicide with an overdose of heroin. She is obtunded and has a respiratory rate of 6 breaths/min. She is hypotensive with a blood pressure of 92/60 mmHg and a heart rate of 80 beats/min. The oxygen saturation is 70% on room air. ABG: pH 7.09, PaCO2 80 mmHg, PaO2 42 mmHg. What is the type of respiratory failure seen", "options": [{"label": "A", "text": "Type 1", "correct": false}, {"label": "B", "text": "Type 2", "correct": true}, {"label": "C", "text": "Type 3", "correct": false}, {"label": "D", "text": "Type 4", "correct": false}], "correct_answer": "B. Type 2", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following is not a part of definition of ARDS?", "options": [{"label": "A", "text": "Severe dyspnea", "correct": false}, {"label": "B", "text": "Hypercapnia", "correct": true}, {"label": "C", "text": "Hypoxemia", "correct": false}, {"label": "D", "text": "Diffuse Pulmonary infiltrates", "correct": false}], "correct_answer": "B. Hypercapnia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 27/Fjunior doctor presents tÃ© ED with pleuritic chest pain and sob. Her ABG showspao2. She uses OCP. Her vital signs are: blood pressure 86/44 mmHg, heart rate 130/ min, respiratory rate 30 /min, Sa02 85% on room air. Her ECHO reveals RV hypokinesia. CT chest is shown What is the most appropriate therapy ?", "options": [{"label": "A", "text": "Anti coagulation alone", "correct": false}, {"label": "B", "text": "Anti coagulation plus thrombolysis", "correct": true}, {"label": "C", "text": "Diuretic plus anti coagulation", "correct": false}, {"label": "D", "text": "Surgical embolectomy", "correct": false}], "correct_answer": "B. Anti coagulation plus thrombolysis", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/82(11).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30 y /F with idiopathic pulmonary hypertension & vaso-reactive test was negative. She has symptoms on exertion. Which of the following will be the preferred initial therapy ?", "options": [{"label": "A", "text": "lloprost", "correct": false}, {"label": "B", "text": "Epoprostenol", "correct": false}, {"label": "C", "text": "Ambrisentan", "correct": true}, {"label": "D", "text": "Nifedipine", "correct": false}], "correct_answer": "C. Ambrisentan", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 68 yy old male with cough, sputum. Auscultation showed bronchial breath sounds and crackles . Pt is conscious and coherent , RR =20/min , Blood urea = 44 mg/dl, Bp: 110/70 mm hg. Next step in management", "options": [{"label": "A", "text": "Home Rx with antibiotics", "correct": false}, {"label": "B", "text": "Admit in ICU and manage without invasive mech ventilation", "correct": false}, {"label": "C", "text": "Admit in ICU and manage with invasive mech ventilation", "correct": false}, {"label": "D", "text": "Admit in ward and start antibiotics", "correct": true}], "correct_answer": "D. Admit in ward and start antibiotics", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A HIV pt presents with fever cough and sputum production. Examination shows bronchial breath sounds and crepitations in right infra scapular area . Xray shows right lobar consolidation . Pt CD4 count is 55 /mm3 What is the organism responsible ?", "options": [{"label": "A", "text": "Pneumocystis jirovecii", "correct": false}, {"label": "B", "text": "Streptococcus pneumoniae", "correct": true}, {"label": "C", "text": "Mycoplasma", "correct": false}, {"label": "D", "text": "Staph aureus", "correct": false}], "correct_answer": "B. Streptococcus pneumoniae", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "White colored pleural fluid with high triglycerides seen in", "options": [{"label": "A", "text": "Chylothorax", "correct": true}, {"label": "B", "text": "Pseudochylothorax", "correct": false}, {"label": "C", "text": "Empyema", "correct": false}, {"label": "D", "text": "Hypersensitivity pneumonitis", "correct": false}], "correct_answer": "A. Chylothorax", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/86(11).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "In a patient with clinical signs of asthma which of the following tests will suggest diagnosis?", "options": [{"label": "A", "text": "Increase in FEV1/FVC", "correct": false}, {"label": "B", "text": "> 200 ml increase in FeV1 after bronchodilator", "correct": true}, {"label": "C", "text": "No Diurnal variation PEFR", "correct": false}, {"label": "D", "text": "Reduction in FeV1> 20% after bronchodilators", "correct": false}], "correct_answer": "B. > 200 ml increase in FeV1 after bronchodilator", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Initial treatment of COPD Group C patients will be", "options": [{"label": "A", "text": "SABA", "correct": false}, {"label": "B", "text": "LABA", "correct": false}, {"label": "C", "text": "LAMA", "correct": true}, {"label": "D", "text": "ICS", "correct": false}], "correct_answer": "C. LAMA", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Moderate COPD indicates:", "options": [{"label": "A", "text": "FEV1 > 80% of predicted", "correct": false}, {"label": "B", "text": "FEV1 â€“ 50-79% of predicted", "correct": true}, {"label": "C", "text": "FEV1 - 30-49% of predicted", "correct": false}, {"label": "D", "text": "FEV1 <30% of predicted", "correct": false}], "correct_answer": "B. FEV1 â€“ 50-79% of predicted", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 37 year-old patient presents with adult-onset asthma. Due to increased production of brownish sputum production, and perihilar and upper lobe opacities on a conventional chest radiograph. A CT image is shown below.", "options": [{"label": "A", "text": "Elevated serum IgE", "correct": false}, {"label": "B", "text": "Peripheral eosinophilia", "correct": false}, {"label": "C", "text": "H/O Asthma or cystic fibrosis.", "correct": false}, {"label": "D", "text": "Occurrence in patients with old cavitory lesions", "correct": true}], "correct_answer": "D. Occurrence in patients with old cavitory lesions", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/90(14).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 60-year-old female is referred for dyspnoea on exertion and chronic cough. Her dyspnoea and cough have worsened continuously during the past 12 months. Pulmonary function testing reveals an FVC of 72% predicted, FEV1 of 80% predicted and a DLCO of 38% predicted. A representative slice of the chest CT is shown below. Open-lung biopsy reveals randomly distributed foci of scarring with fibroblasts surrounded by normal lung parenchyma.", "options": [{"label": "A", "text": "Usual interstitial pneumonia", "correct": true}, {"label": "B", "text": "Non specific interstitial pneumonia", "correct": false}, {"label": "C", "text": "Chronic eosinophilic pneumonia", "correct": false}, {"label": "D", "text": "Cystic fibrosis", "correct": false}], "correct_answer": "A. Usual interstitial pneumonia", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/91(18).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following drug is known to decrease mortality in critically ill COVID pt ?", "options": [{"label": "A", "text": "Remdesivir", "correct": false}, {"label": "B", "text": "Hydroxychloroquine", "correct": false}, {"label": "C", "text": "Toclizumab", "correct": false}, {"label": "D", "text": "Dexarriethasone", "correct": true}], "correct_answer": "D. Dexarriethasone", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Features of Pickwickian syndrome include all expect", "options": [{"label": "A", "text": "Obesity", "correct": false}, {"label": "B", "text": "Day time hypercapnia", "correct": false}, {"label": "C", "text": "OSA", "correct": false}, {"label": "D", "text": "Hypothyroidism", "correct": true}], "correct_answer": "D. Hypothyroidism", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 60 / M , HEAVY SMOKER bronchogenic carcinoma presenting with polyuria, pain abdomen, nausea, vomiting, altered sensorium with the below chest xray .The histological variant can be mostly", "options": [{"label": "A", "text": "Small cell Ca", "correct": false}, {"label": "B", "text": "Large cell Ca", "correct": false}, {"label": "C", "text": "Adenocarcinoma", "correct": false}, {"label": "D", "text": "Squamcous cell", "correct": true}], "correct_answer": "D. Squamcous cell", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/94(13).jpg"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following statements about lung carcinoma is true", "options": [{"label": "A", "text": "World wide squamous cell variant accounts for 70% of all lung cancers", "correct": false}, {"label": "B", "text": "Small cell variant typically presents with cavitation", "correct": false}, {"label": "C", "text": "Small cell variant is typically associated with smoking", "correct": true}, {"label": "D", "text": "Adenocarcinoma variant is typically central in location", "correct": false}], "correct_answer": "C. Small cell variant is typically associated with smoking", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 25 year old female presents with SOB . NO H/O cough / chest pain / fever /wheeze hemoptysis . Her ABG Shows Ph ; 7.50, Pao2: 94 mmhg , Paco2 : 28 mmhg , HCO3- : 20 meq/L. what is most likely diagnosis?", "options": [{"label": "A", "text": "Acute asthmatic attack", "correct": false}, {"label": "B", "text": "Pul embolism", "correct": false}, {"label": "C", "text": "Panic attack", "correct": true}, {"label": "D", "text": "Pneumonia", "correct": false}], "correct_answer": "C. Panic attack", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A normal anion gap metabolic acidosis occurs in", "options": [{"label": "A", "text": "Diarrhoea", "correct": true}, {"label": "B", "text": "Diabetic ketoacidosis", "correct": false}, {"label": "C", "text": "Methyl alcohol poisoning", "correct": false}, {"label": "D", "text": "Acute renal failure", "correct": false}], "correct_answer": "A. Diarrhoea", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "All of the following are chloride responsive causes of metabolic alkalosis except", "options": [{"label": "A", "text": "Recurrent vomiting", "correct": false}, {"label": "B", "text": "NG aspiration", "correct": false}, {"label": "C", "text": "Excessive loop diuretic use", "correct": false}, {"label": "D", "text": "Primary hypercaldosteronism", "correct": true}], "correct_answer": "D. Primary hypercaldosteronism", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Explanation:</strong></p>\n<ul><li>â€¢ chloride-resistant</li></ul>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 45 year old male with features of pulmonary tuberculosis was subjected to sputum CBNAAT which was suggestive rifampicin resistant tuberculosis. A longer MDR/RR-TB regimen is being planned for the patient. In this newly recommended regimen as per NTEP 2021 for Multi Drug Resistant TB (MDR TB), what is the drug that not a part of the usual treatment regimen?", "options": [{"label": "A", "text": "Bedaquiline", "correct": false}, {"label": "B", "text": "Linezolid", "correct": false}, {"label": "C", "text": "Clofazamine", "correct": false}, {"label": "D", "text": "Ethionamide", "correct": true}], "correct_answer": "D. Ethionamide", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following has been recognized as a significant risk factor for the development of acute respiratory distress syndrome (ARDS) and death in patients with COVID-19?", "options": [{"label": "A", "text": "Decreased lactate dehydrogenase levels", "correct": false}, {"label": "B", "text": "Lymphocytosis", "correct": false}, {"label": "C", "text": "Neutropenia", "correct": false}, {"label": "D", "text": "Elevated D-dimer levels", "correct": true}], "correct_answer": "D. Elevated D-dimer levels", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(