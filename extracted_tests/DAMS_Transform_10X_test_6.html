<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Ecg</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`ðŸ§  Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Ecg</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                20 Questions | 80 Total Marks | 30 min Duration | ~90.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 20 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 30 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 20</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Ecg - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 20</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 20 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "Which of the following is true regarding the placement of ECG leads?", "options": [{"label": "A", "text": "The earth to all leads is in the right leg.", "correct": true}, {"label": "B", "text": "Lead I: Positive pole to the right and negative pole towards the left", "correct": false}, {"label": "C", "text": "Lead III: Positive pole on the left and negative pole towards the right", "correct": false}, {"label": "D", "text": "Lead II: Positive pole on the right and negative pole towards the left", "correct": false}], "correct_answer": "A. The earth to all leads is in the right leg.", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "What does the given ECG show?", "options": [{"label": "A", "text": "P-pulmonale", "correct": true}, {"label": "B", "text": "Ventricular bigeminy", "correct": false}, {"label": "C", "text": "Electrical alternans", "correct": false}, {"label": "D", "text": "Improper calibration", "correct": false}], "correct_answer": "A. P-pulmonale", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/51(27).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 65-year-old female patient is brought to the emergency department in a state of unconsciousness. Her BP is 70/50 mm of Hg. Her ECG is shown below. What is the next best step in the management of her condition?", "options": [{"label": "A", "text": "IV verapamil", "correct": false}, {"label": "B", "text": "IV adenosine", "correct": false}, {"label": "C", "text": "Carotid massage", "correct": false}, {"label": "D", "text": "DC cardioversion", "correct": true}], "correct_answer": "D. DC cardioversion", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/52(29).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 40-year-old male patient came to ED with complaints of weakness, paresthesia, and breathing difficulty. Relevant investigations were done. The ECG obtained is suggestive of:", "options": [{"label": "A", "text": "Hypokalemia", "correct": true}, {"label": "B", "text": "Hyperkalemia", "correct": false}, {"label": "C", "text": "Hypocalcemia", "correct": false}, {"label": "D", "text": "Hypercalcemia", "correct": false}], "correct_answer": "A. Hypokalemia", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/53(29).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Osborn waves in ECG are seen in:", "options": [{"label": "A", "text": "Hypothyroidism", "correct": false}, {"label": "B", "text": "Hypothermia", "correct": true}, {"label": "C", "text": "Hypocalcemia", "correct": false}, {"label": "D", "text": "Hypokalemia", "correct": false}], "correct_answer": "B. Hypothermia", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "What is the diagnosis of this patient from the ECG shown below?", "options": [{"label": "A", "text": "Normal ECG", "correct": false}, {"label": "B", "text": "Ventricular fibrillation", "correct": false}, {"label": "C", "text": "Ventricular tachycardia", "correct": true}, {"label": "D", "text": "Misplaced leads", "correct": false}], "correct_answer": "C. Ventricular tachycardia", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/54(35).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 60-year-old man presented with an episode of acute onset dizziness and loss of consciousness which lasted for a few seconds followed by a regain of full consciousness. There were no similar episodes in the past. Which of the following is a true statement regarding this scenario?", "options": [{"label": "A", "text": "ECG to rule out atrial fibrillation", "correct": true}, {"label": "B", "text": "If ECG is normal, CT scan should be done", "correct": false}, {"label": "C", "text": "Tilt-table testing", "correct": false}, {"label": "D", "text": "Vestibular neuritis is a possible condition that can cause these symptoms", "correct": false}], "correct_answer": "A. ECG to rule out atrial fibrillation", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 67-year-old patient with hypertension, diabetes, and asthma is found to have an irregularly irregular pulse during a routine physical examination. ECG findings are shown below. How is the risk of stroke determined in this patient?", "options": [{"label": "A", "text": "CHA2DS2-VASC", "correct": true}, {"label": "B", "text": "NIH Stroke Score", "correct": false}, {"label": "C", "text": "ABCD2", "correct": false}, {"label": "D", "text": "Modified GCS", "correct": false}], "correct_answer": "A. CHA2DS2-VASC", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/55(22).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 47-year-old woman presents with complaints of numbness around the lips and a tingling sensation in her fingers. She underwent parathyroidectomy for hyperparathyroidism one year ago. An ECG was done and is given below. What will be your immediate management?", "options": [{"label": "A", "text": "Beta blockers", "correct": false}, {"label": "B", "text": "Teriparatide", "correct": false}, {"label": "C", "text": "IV Bisphosphonates", "correct": false}, {"label": "D", "text": "IV Calcium gluconate", "correct": true}], "correct_answer": "D. IV Calcium gluconate", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/56(26).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 55-year-old heavy smoker presented to the Emergency Department with severe anterior chest pain. An electrocardiogram (ECG) on admission revealed no ST segment changes and he was started on aspirin and low molecular weight heparin pending troponin results. Six hours later he develops more severe pain and has ST 2.5 mm elevation in leads V3 to V6. What is the management of choice?", "options": [{"label": "A", "text": "Start him on B-blockade", "correct": false}, {"label": "B", "text": "Arrange urgent (immediate)angiography +/angioplasty and stenting", "correct": true}, {"label": "C", "text": "Start a IIb-Illa receptor antagonist", "correct": false}, {"label": "D", "text": "Start tenecteplase", "correct": false}], "correct_answer": "B. Arrange urgent (immediate)angiography +/angioplasty and stenting", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 28-year-old man presents for follow up after two episodes of collapse. The Cardiology Clinic arranged a 24-hour monitoring which reveals one episode of nocturnal paroxysmal atrial fibrillation with a maximal ventricular rate of 145 bpm. PR interval is 140 milliseconds and the QT interval is normal. Echocardiography is unremarkable. Thyroid function testing is unremarkable. Which of the following treatments is most appropriate in this case?", "options": [{"label": "A", "text": "Bisoprolol", "correct": true}, {"label": "B", "text": "Disapyramide", "correct": false}, {"label": "C", "text": "Amiodarone", "correct": false}, {"label": "D", "text": "Digoxin", "correct": false}], "correct_answer": "A. Bisoprolol", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 49 year old tall thin male smoker presents with dyspnoea and palpitations. in the blood there is low K+ and Mg+2. ECG was done that is showing in the image. what is the probable Diagnosis?", "options": [{"label": "A", "text": "Multifocal atrial tachycardia", "correct": true}, {"label": "B", "text": "Atrial fibrillation", "correct": false}, {"label": "C", "text": "PSVT", "correct": false}, {"label": "D", "text": "Atrial Flutter", "correct": false}], "correct_answer": "A. Multifocal atrial tachycardia", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/57(23).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30 year old patient of valvular heart is having fever for last 2 weeks. following ECG done for this patient .he was Unconscious. what will be treatment given to this patient?", "options": [{"label": "A", "text": "Use of automated external defibrillator", "correct": false}, {"label": "B", "text": "Injection of adrenaline", "correct": true}, {"label": "C", "text": "Injection of vasopressin 40 mg iv", "correct": false}, {"label": "D", "text": "Injection of atropine 0.5mg iv", "correct": false}], "correct_answer": "B. Injection of adrenaline", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/58(20).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Given below is the ECG of a patient with breathlessness who is admitted to the emergency department. His BP is 90/56mm Hg. Which clinical finding is not seen in this condition?", "options": [{"label": "A", "text": "Muffled heart sounds", "correct": false}, {"label": "B", "text": "Pulsus paradoxus", "correct": false}, {"label": "C", "text": "Pericardial knock", "correct": true}, {"label": "D", "text": "Elevated jugular venous pulse", "correct": false}], "correct_answer": "C. Pericardial knock", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/59(28).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A middle aged male patient came for routine check up. An electrocardiogram was done which is shown. What is the most probable finding in this patient?", "options": [{"label": "A", "text": "First degree heart block", "correct": true}, {"label": "B", "text": "Type I Mobitz block", "correct": false}, {"label": "C", "text": "Type Il Mobitz block", "correct": false}, {"label": "D", "text": "Complete heart block", "correct": false}], "correct_answer": "A. First degree heart block", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/60(30).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 60yr old man with history of myocardial infarction 1 year back came with complaints of palpitations and syncope. The ECG strip obtained during admission is given. What is the long term treatment for this condition?", "options": [{"label": "A", "text": "Amiodarone", "correct": false}, {"label": "B", "text": "Atropine only", "correct": false}, {"label": "C", "text": "Permanent pacemaker", "correct": true}, {"label": "D", "text": "Atropine and isoproterenol", "correct": false}], "correct_answer": "C. Permanent pacemaker", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/61(22).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Which of the following antiarrhythmics is ineffective for use in the following arrhythmia?", "options": [{"label": "A", "text": "Esmolol", "correct": false}, {"label": "B", "text": "Lidocaine", "correct": true}, {"label": "C", "text": "Sotalol", "correct": false}, {"label": "D", "text": "Amiodarone", "correct": false}], "correct_answer": "B. Lidocaine", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/62(27).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "An elderly woman is rushed to the emergency room following an episode of syncope. Her caretaker reports that the patient had multiple episodes of loose stools and vomiting for the past 2 days. Her blood investigations and ECG are given below. What is the next best step in the management of this patient? Serum sodium - 140mEq/L Serum potassium - 7.1mEq/L Serum chloride - 100mEq/L Blood urea nitrogen:creatinine ratio - 26.9", "options": [{"label": "A", "text": "Patiromer", "correct": false}, {"label": "B", "text": "Intravenous calcium gluconate", "correct": true}, {"label": "C", "text": "Hemodialysis", "correct": false}, {"label": "D", "text": "Intravenous insulin", "correct": false}], "correct_answer": "B. Intravenous calcium gluconate", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/63(17).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "The parents of a 10-year-old boy noticed agonal respirations at 5 AM while the boy was asleep. He was rushed to the emergency department and an ECG revealed the following findings. What is the likely diagnosis?", "options": [{"label": "A", "text": "Early repolarization syndrome", "correct": false}, {"label": "B", "text": "Brugada Syndrome", "correct": true}, {"label": "C", "text": "Hypertrophic cardiomyopathy", "correct": false}, {"label": "D", "text": "Atrial fibrillation", "correct": false}], "correct_answer": "B. Brugada Syndrome", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/65(21).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Axis deviation shown in given ECG is consistent with:", "options": [{"label": "A", "text": "Lying down position", "correct": false}, {"label": "B", "text": "Thin and tall", "correct": true}, {"label": "C", "text": "Obese person", "correct": false}, {"label": "D", "text": "At the end of peak expiration", "correct": false}], "correct_answer": "B. Thin and tall", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/64(23).png"], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(