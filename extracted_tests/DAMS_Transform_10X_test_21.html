<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Obstetrics</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`üß† Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Obstetrics</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                20 Questions | 80 Total Marks | 30 min Duration | ~90.0 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 20 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 30 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 20</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Obstetrics - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 20</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 20 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "A 32-year-old primigravida of 32 weeks presented with vaginal bleeding. On examination, the uterus was tender and the cardiotocograph showed fetal distress. However, the mother is hemodynamically stable. What is the grade of placental abruption in this patient?", "options": [{"label": "A", "text": "Grade 0", "correct": false}, {"label": "B", "text": "Grade 1", "correct": false}, {"label": "C", "text": "Grade 3", "correct": false}, {"label": "D", "text": "Grade 2", "correct": true}], "correct_answer": "D. Grade 2", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "Woman presents with numbness and paraesthesia along the anterolateral thigh two days after vaginal delivery. Which nerve is likely involved in this condition?", "options": [{"label": "A", "text": "Femoral nerve", "correct": false}, {"label": "B", "text": "Iliohypogastric nerve", "correct": false}, {"label": "C", "text": "Ilioinguinal nerve", "correct": false}, {"label": "D", "text": "Lateral femoral cutaneous nerve", "correct": true}], "correct_answer": "D. Lateral femoral cutaneous nerve", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A female presents with 35 weeks and 3 days of gestation, AFI = 5 and there is no end-diastolic blood flow. What is the management?", "options": [{"label": "A", "text": "Immediate termination", "correct": true}, {"label": "B", "text": "Give surfactant and wait till 36 weeks", "correct": false}, {"label": "C", "text": "Do Doppler everyday to check for reversion", "correct": false}, {"label": "D", "text": "Terminate after 37 weeks", "correct": false}], "correct_answer": "A. Immediate termination", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A pregnant woman presents to an antenatal clinic for the first time during the second trimester. In view of a family history of thyroid disorders, a thyroid function test is sent for. Altered levels of which of the following would not be a cause for concern?", "options": [{"label": "A", "text": "Free T3 level", "correct": false}, {"label": "B", "text": "Free T4 level", "correct": false}, {"label": "C", "text": "Total T3 level", "correct": true}, {"label": "D", "text": "TSH level", "correct": false}], "correct_answer": "C. Total T3 level", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A woman presented with complaints of amenorrhoea for 6 weeks and a history of prior ectopic pregnancy. Serial serum beta hCG levels were estimated in her. Which of the following findings will increase the suspicion of ectopic gestation in her?", "options": [{"label": "A", "text": "Low levels with prolonged doubling time", "correct": true}, {"label": "B", "text": "High levels with decreased doubling time", "correct": false}, {"label": "C", "text": "Undetectable", "correct": false}, {"label": "D", "text": "Double the expected value", "correct": false}], "correct_answer": "A. Low levels with prolonged doubling time", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "During your time in the labor room, you performed a vaginal examination on a primigravida female. The exam showed that the anterior cervix had a soft consistency, was dilated to 3 cm, and measured 3 cm in length. In this case, you would assign a Bishop score of 1 to which of these cervical characteristics?", "options": [{"label": "A", "text": "Anterior position of cervix", "correct": false}, {"label": "B", "text": "Soft consistency of cervix", "correct": false}, {"label": "C", "text": "Station -2", "correct": true}, {"label": "D", "text": "Cervical dilatation of 3 cm", "correct": false}], "correct_answer": "C. Station -2", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/1(918).png"], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 24-year-old woman at 34 weeks of gestation is admitted for preeclampsia with severe features, and you have administered MgSO4, as prophylaxis. Which of the following is not a part of monitoring?", "options": [{"label": "A", "text": "Routine measurement of serum magnesium levels", "correct": true}, {"label": "B", "text": "Urine output should be > 30 ml/hr", "correct": false}, {"label": "C", "text": "Respiratory rate > 12/min", "correct": false}, {"label": "D", "text": "Deep tendon reflexes should be present", "correct": false}], "correct_answer": "A. Routine measurement of serum magnesium levels", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 32-year-old woman, G2P1, at 34 weeks‚Äô gestation presents with headaches and blurred vision. Her blood pressure is 160/100 mmHg. Urinalysis shows 3+ proteinuria. There is no history of hypertension prior to pregnancy. She has 2+ lower extremity edema. What is the most appropriate next step in management?", "options": [{"label": "A", "text": "Start oral labetalol and monitor as outpatient", "correct": false}, {"label": "B", "text": "Administer magnesium sulfate and prepare for delivery", "correct": true}, {"label": "C", "text": "Repeat blood pressure in 4 hours", "correct": false}, {"label": "D", "text": "Schedule elective cesarean at 37 weeks", "correct": false}], "correct_answer": "B. Administer magnesium sulfate and prepare for delivery", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "26-year-old woman presents with lower abdominal pain and vaginal spotting. Her last menstrual period was 6 weeks ago. She has a positive pregnancy test. Transvaginal ultrasound does not show an intrauterine pregnancy, and her serum Œ≤-hCG is 2,200 mIU/mL. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Threatened abortion", "correct": false}, {"label": "B", "text": "Ectopic pregnancy", "correct": true}, {"label": "C", "text": "Complete abortion", "correct": false}, {"label": "D", "text": "Normal early pregnancy", "correct": false}], "correct_answer": "B. Ectopic pregnancy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 35-year-old woman is undergoing vaginal delivery. After delivery of the head, the shoulders fail to deliver despite gentle traction. The fetal head retracts against the perineum (‚Äúturtle sign‚Äù). What is the most appropriate next step in management?", "options": [{"label": "A", "text": "Increase fundal pressure", "correct": false}, {"label": "B", "text": "Apply forceps", "correct": false}, {"label": "C", "text": "Perform McRoberts maneuver and suprapubic pressure", "correct": true}, {"label": "D", "text": "Perform cesarean section", "correct": false}], "correct_answer": "C. Perform McRoberts maneuver and suprapubic pressure", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30-year-old woman, G3P2, at 36 weeks gestation presents with sudden onset of painful vaginal bleeding. She also reports abdominal pain and decreased fetal movements. Her BP is 90/60 mmHg, HR 110 bpm. On exam, the uterus is firm and tender. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Uterine rupture", "correct": false}, {"label": "B", "text": "Vasa previa", "correct": false}, {"label": "C", "text": "Placental abruption", "correct": true}, {"label": "D", "text": "Preterm labor", "correct": false}], "correct_answer": "C. Placental abruption", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 28-year-old G2P1 woman at 35 weeks gestation presents with nausea, malaise, and right upper quadrant pain. Her labs show: ‚Ä¢ AST: 420 U/L ‚Ä¢ ALT: 380 U/L ‚Ä¢ Platelets: 85,000/ŒºL ‚Ä¢ Total bilirubin: 3.2 mg/dL ‚Ä¢ Glucose: 58 mg/dL ‚Ä¢ Creatinine: 2.0 mg/dL ‚Ä¢ PT/INR: elevated What is the most likely diagnosis?", "options": [{"label": "A", "text": "HELLP syndrome", "correct": false}, {"label": "B", "text": "Acute fatty liver of pregnancy", "correct": true}, {"label": "C", "text": "Severe preeclampsia", "correct": false}, {"label": "D", "text": "Intrahepatic cholestasis of pregnancy", "correct": false}], "correct_answer": "B. Acute fatty liver of pregnancy", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "33-year-old woman with a history of 3 consecutive first-trimester pregnancy losses is currently 10 weeks pregnant. She has no chronic illnesses. Workup reveals a positive lupus anticoagulant and anticardiolipin antibodies. Which of the following is the most appropriate management during pregnancy?", "options": [{"label": "A", "text": "Low-dose aspirin only", "correct": false}, {"label": "B", "text": "Low molecular weight heparin only", "correct": false}, {"label": "C", "text": "Low molecular weight heparin and low-dose aspirin", "correct": true}, {"label": "D", "text": "High-dose corticosteroids", "correct": false}], "correct_answer": "C. Low molecular weight heparin and low-dose aspirin", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "25-year-old G1P0 at 30 weeks‚Äô gestation presents with ruptured membranes for 36 hours. She now has a fever of 38.9¬∞C, maternal tachycardia, uterine tenderness, and fetal tachycardia on monitoring. What is the next best step?", "options": [{"label": "A", "text": "Administer corticosteroids and observe", "correct": false}, {"label": "B", "text": "Administer tocolytics and antibiotics", "correct": false}, {"label": "C", "text": "Begin broad-spectrum antibiotics and proceed with delivery", "correct": true}, {"label": "D", "text": "Delay delivery until 34 weeks if fetal monitoring is reassuring", "correct": false}], "correct_answer": "C. Begin broad-spectrum antibiotics and proceed with delivery", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 26-year-old G1P0 woman at 21 weeks with monochorionic diamniotic twins undergoes an ultrasound. One twin has polyhydramnios, a distended bladder, and is significantly larger. The other twin has oligohydramnios and appears growth-restricted. What is the best next step in management?", "options": [{"label": "A", "text": "Deliver both twins immediately", "correct": false}, {"label": "B", "text": "Amnioreduction of the larger twin‚Äôs sac", "correct": false}, {"label": "C", "text": "Intrauterine blood transfusion", "correct": false}, {"label": "D", "text": "Laser photocoagulation of placental vessels", "correct": true}], "correct_answer": "D. Laser photocoagulation of placental vessels", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "36-year-old woman with a history of a prior classical cesarean section presents at 38 weeks in active labor. She suddenly complains of severe abdominal pain. Fetal heart rate shows bradycardia. On exam, the uterus is firm, and fetal parts are palpable abdominally. There is minimal vaginal bleeding. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Placental abruption", "correct": false}, {"label": "B", "text": "Uterine rupture", "correct": true}, {"label": "C", "text": "Cord prolapse", "correct": false}, {"label": "D", "text": "Vasa previa", "correct": false}], "correct_answer": "B. Uterine rupture", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30-year-old G2P1 woman is in active labor at 6 cm dilation. The fetal heart tracing shows recurrent late decelerations, absent variability, and no accelerations. A scalp stimulation test is attempted and fails to produce an acceleration. She is on low-dose oxytocin. What is the most appropriate next step?", "options": [{"label": "A", "text": "Continue monitoring and reassess in 30 minutes", "correct": false}, {"label": "B", "text": "Discontinue oxytocin and administer IV fluids", "correct": false}, {"label": "C", "text": "Prepare for emergent cesarean delivery", "correct": true}, {"label": "D", "text": "Administer terbutaline", "correct": false}], "correct_answer": "C. Prepare for emergent cesarean delivery", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 38-year-old woman is in labor at term when she suddenly becomes dyspneic, hypoxic, and hypotensive. She then develops tonic-clonic seizures. Labs show DIC (low platelets, elevated PT/PTT, low fibrinogen). Fetal bradycardia is noted. What is the most likely diagnosis?", "options": [{"label": "A", "text": "Pulmonary embolism", "correct": false}, {"label": "B", "text": "Eclampsia", "correct": false}, {"label": "C", "text": "Sepsis", "correct": false}, {"label": "D", "text": "Amniotic fluid embolism", "correct": true}], "correct_answer": "D. Amniotic fluid embolism", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 28-year-old woman, G2P2, presents to the emergency department 10 days after a spontaneous vaginal delivery with heavy vaginal bleeding. She reports soaking multiple pads per hour over the last 3 hours. She has mild lower abdominal cramping but no fever or foul-smelling discharge. On exam, she is pale, HR 112 bpm, BP 92/58 mmHg. Her uterus is mildly enlarged and tender on bimanual exam. Hemoglobin is 7.8 g/dL. Ultrasound shows heterogeneous echogenic material in the endometrial cavity. What is the most appropriate next step in management?", "options": [{"label": "A", "text": "Administer oxytocin and observe", "correct": false}, {"label": "B", "text": "Start broad-spectrum IV antibiotics", "correct": false}, {"label": "C", "text": "Perform dilation and curettage (D&C)", "correct": true}, {"label": "D", "text": "Administer methylergonovine IM", "correct": false}], "correct_answer": "C. Perform dilation and curettage (D&C)", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}, {"text": "A 30-year-old G2P2 woman has a spontaneous vaginal delivery after an uncomplicated labor. Soon after the delivery of the placenta, she develops profuse vaginal bleeding and severe lower abdominal pain. On exam, she is pale, diaphoretic, hypotensive (BP 70/40 mmHg), and tachycardic (HR 130 bpm). The uterine fundus is not palpable abdominally, and a smooth, red, round mass is protruding from the vagina. What is the next best step in management?", "options": [{"label": "A", "text": "Start uterotonics and prepare for uterine artery embolization", "correct": false}, {"label": "B", "text": "Perform immediate manual replacement of the uterus", "correct": true}, {"label": "C", "text": "Apply bimanual uterine massage and wait for spontaneous correction", "correct": false}, {"label": "D", "text": "Proceed to emergency hysterectomy", "correct": false}], "correct_answer": "B. Perform immediate manual replacement of the uterus", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": ""}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(