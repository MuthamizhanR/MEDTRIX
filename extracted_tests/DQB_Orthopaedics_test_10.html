<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" nameag="viewport"/>
<title>Lower Limb</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
<style>
        /* Custom styles for enhanced aesthetics and responsiveness */
        .option-btn {
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .option-btn:hover, .option-btn:active {
            transform: scale(1.02);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .option-btn.selected {
            background-color: #3b82f6;
            color: white;
        }
        .marked {
            background-color: #fef08a;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
            background: linear-gradient(to right, #3b82f6, #22c55e);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.8; }
            100% { opacity: 1; }
        }
        .question-nav-btn, .result-nav-btn-grid {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 16px;
            touch-action: manipulation;
            transition: all 0.2s ease;
        }
        .question-nav-btn:hover, .question-nav-btn:active, .result-nav-btn-grid:hover, .result-nav-btn-grid:active {
            transform: scale(1.05);
        }
        .answered {
            background-color: #22c55e;
            color: white;
        }
        .unanswered {
            background-color: #e5e7eb;
        }
        .marked-nav {
            border: 2px solid #fef08a;
        }
        .video-container, .audio-container {
            display: none;
            position: relative;
        }
        .video-container.active, .audio-container.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .section-transition {
            transition: opacity 0.3s ease;
        }
        .section-transition.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .result-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
        }
        .result-nav-btn {
            background-color: #4b5563;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        .result-nav-btn:hover, .result-nav-btn:active {
            background-color: #374151;
            transform: scale(1.05);
        }
        .result-nav-btn:disabled {
            background-color: #d1d5db;
            cursor: not-allowed;
        }
        .error-message {
            color: #dc2626;
            font-weight: bold;
            margin-top: 1rem;
        }
        /* Mobile-specific adjustments */
        @media (max-width: 640px) {
            .question-nav-btn, .result-nav-btn-grid {
                width: 38px;
                height: 38px;
                font-size: 14px;
            }
            .nav-panel, .results-nav-panel {
                width: 100%;
                max-width: 100%;
                overscroll-behavior: contain;
            }
            .option-btn {
                padding: 12px;
                font-size: 14px;
            }
            .header-text {
                font-size: 1.5rem;
            }
            .subheader-text {
                font-size: 0.875rem;
            }
            .button-group, .result-nav {
                flex-direction: column;
                gap: 0.5rem;
            }
            .result-nav-btn {
                width: 100%;
                text-align: center;
            }
        }
        /* Dark mode styles */
        .dark .bg-gray-100 {
            background-color: #1f2937;
        }
        .dark .bg-white {
            background-color: #374151;
        }
        .dark .text-gray-700 {
            color: #d1d5db;
        }
        .dark .text-gray-800 {
            color: #e5e7eb;
        }
        .dark .bg-gray-200 {
            background-color: #4b5563;
        }
        .dark .border {
            border-color: #4b5563;
        }
        .dark .bg-blue-500 {
            background-color: #2563eb;
        }
        .dark .hover\:bg-blue-600:hover {
            background-color: #1d4ed8;
        }
        .dark .bg-yellow-300 {
            background-color: #b45309;
            color: white;
        }
        .dark .hover\:bg-yellow-400:hover {
            background-color: #92400e;
        }
        .dark .bg-green-500 {
            background-color: #15803d;
        }
        .dark .hover\:bg-green-600:hover {
            background-color: #166534;
        }
        .dark .bg-gray-500 {
            background-color: #4b5563;
        }
        .dark .hover\:bg-gray-600:hover {
            background-color: #374151;
        }
        .dark .result-nav-btn, .dark .result-nav-btn-grid {
            background-color: #2563eb;
        }
        .dark .result-nav-btn:hover, .dark .result-nav-btn:active, .dark .result-nav-btn-grid:hover, .dark .result-nav-btn-grid:active {
            background-color: #1d4ed8;
        }
        .dark .result-nav-btn:disabled, .dark .result-nav-btn-grid:disabled {
            background-color: #4b5563;
        }
        .video-placeholder {
            width: 400px;
            height: 300px;
            background-color: #f0f0f0;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            margin-top: 10px;
            border-radius: 8px;
            border: 1px solid #ccc;
        }
        .play-icon {
            font-size: 40px;
            color: #007bff;
        }
        .video-loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }
    </style>

<script>
    // --- GEMINI AUTO-CAPTURE LISTENER ---
    // This function runs immediately after the quiz determines an answer is INCORRECT.
    function captureMistake(questionIndex, questionsData) {
        try {
            const item = questionsData[questionIndex];
            // Use the question text as a unique, stable identifier
            const uniqueId = 'srs_quiz_' + btoa(item.text.substring(0, 50)).replace(/=/g, ''); 

            // 1. Clean and simplify the explanation for storage
            let explanationText = item.explanation || item.correct_answer || "No explanation provided.";
            
            // Strip complex HTML (images, lists) and boilerplate text
            explanationText = explanationText.replace(/<img[^>]*>/g, "[IMAGE]").trim(); // Replace images with placeholder
            explanationText = explanationText.replace(/<p><strong>Ans\. [A-Z]\).*/i, "").trim(); // Remove the repeated Answer line
            explanationText = explanationText.replace(/<p><strong>Educational Objective:<\/strong>.*?<\/p>/gs, "").trim(); // Remove EO block
            explanationText = explanationText.replace(/@dams_new_robot/g, "");
            explanationText = explanationText.replace(/<\/?[^>]+(>|$)/g, " ").trim(); // Final strip of remaining tags

            // 2. Prepare card data
            const cardData = {
                text: item.text,
                answer: item.correct_answer,
                explanation: explanationText.substring(0, 500), // Keep explanations short
                nextReview: 0, // Due immediately
                reviews: 0,
                source: document.title.split('-')[0].trim() || 'Quiz'
            };

            // 3. Save to Local Storage (SRS Bank)
            localStorage.setItem(uniqueId, JSON.stringify(cardData));
            
            console.log(`ðŸ§  Captured Mistake #${questionIndex + 1} from ${document.title}`);

        } catch (e) {
            console.error("SRS Capture Failed:", e);
        }
    }
    // --- END GEMINI AUTO-CAPTURE LISTENER ---
</script>

</head>
<body class="bg-gray-100 font-sans transition-colors duration-300 min-h-screen overflow-y-auto">
<!-- Header Section -->
<header class="bg-blue-600 text-white p-4 shadow-lg">
<div class="container mx-auto">
<h1 class="text-2xl md:text-3xl font-bold header-text">Lower Limb</h1>
<p class="mt-2 text-sm md:text-base subheader-text">
                38 Questions | 124 Total Marks | 48 min Duration | ~75.79 sec/question
            </p>
<button class="mt-2 bg-gray-200 text-gray-800 px-3 py-1 rounded-lg hover:bg-gray-300 transition dark:bg-gray-600 dark:text-white" id="theme-toggle">
                Toggle Dark Mode
            </button>
</div>
</header>
<!-- Instructions Section -->
<section class="container mx-auto p-4 md:p-6 section-transition" id="instructions">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-xl font-semibold mb-4">Instructions</h2>
<ul class="list-disc list-inside space-y-2 text-gray-700">
<li>This test contains 38 multiple choice questions.</li>
<li>Each question has only one correct answer.</li>
<li>You will have 48 minutes to complete the test.</li>
<li>Click or tap on an option to select your answer.</li>
<li>Use the "Mark for Review" button to revisit questions.</li>
<li>Navigate using Previous/Next buttons or the Questions Navigation panel.</li>
<li>Click "Submit" to finish and view results.</li>
<li>The test will auto-submit when time runs out.</li>
</ul>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="start-test">Start Test</button>


</div>
<div class="error-message hidden" id="error-message"></div>
</div>
</section>
<!-- Quiz Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="quiz">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<!-- Progress Bar -->
<div class="w-full bg-gray-200 rounded-full h-3 mb-4">
<div class="progress-bar h-3 rounded-full" id="progress-bar" style="width: 0%"></div>
</div>
<!-- Question Header -->
<div class="flex flex-col md:flex-row justify-between items-center mb-4">
<h2 class="text-lg font-semibold" id="question-number">Question <span>1</span> of 38</h2>
<p class="text-lg font-semibold mt-2 md:mt-0" id="timer">Time Remaining: <span>00:00</span></p>
</div>
<!-- Question Content -->
<div class="mb-6" id="question-content">
<p class="text-gray-800 mb-4" id="question-text"></p>
<div class="flex flex-wrap gap-4 mb-4" id="question-images"></div>
<div class="space-y-3" id="options"></div>
</div>
<!-- Navigation Buttons -->
<div class="flex flex-col md:flex-row justify-between items-center gap-2 md:gap-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition w-full md:w-auto" disabled="" id="previous-btn">Previous</button>
<button class="bg-yellow-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-yellow-400 transition w-full md:w-auto" id="mark-review">Mark for Review</button>
<button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="next-btn">Next</button>
<button class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full md:w-auto" id="nav-toggle">Questions Navigation</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition w-full md:w-auto" id="submit-test">Submit Test</button>
</div>
</div>
</section>
<!-- Results Section -->
<section class="container mx-auto p-4 md:p-6 hidden section-transition" id="results">
<div class="bg-white rounded-lg shadow-md p-5 md:p-8 md:p-5 md:p-8 min-h-screen md:min-h-0 md:rounded-lg md:shadow-md rounded-none shadow-none flex flex-col justify-between">
<h2 class="text-2xl font-semibold mb-4">Lower Limb - Results</h2>
<div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
<p><strong>Correct:</strong> <span id="correct-count">0</span></p>
<p><strong>Wrong:</strong> <span id="wrong-count">0</span></p>
<p><strong>Unanswered:</strong> <span id="unanswered-count">0</span></p>
<p><strong>Marked for Review:</strong> <span id="marked-count">0</span></p>
</div>
<h3 class="text-lg font-semibold mb-4" id="result-question-number">Question <span>1</span> of 38</h3>
<div class="space-y-6" id="results-content"></div>
<div class="result-nav">
<button aria-label="Previous question result" class="result-nav-btn" disabled="" id="prev-result">Previous</button>
<button aria-label="Toggle results navigation panel" class="result-nav-btn" id="results-nav-toggle">Results Navigation</button>
<button aria-label="Next question result" class="result-nav-btn" id="next-result">Next</button>
</div>
<div class="mt-6 flex space-x-4 button-group md:flex-row flex-col">
<button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition" id="take-again">Take Again</button>
<button class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition" id="review-test">Review Test</button>
</div>
</div>
</section>
<!-- Exit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="exit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Leave Test?</h2>
<p class="text-gray-700 mb-4">Your progress will be lost if you leave this page. Are you sure you want to exit?</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="continue-test">No, Continue</button>
<button class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition" id="exit-test">Yes, Exit</button>
</div>
</div>
</div>
<!-- Submit Confirmation Modal -->
<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden" id="submit-modal">
<div class="bg-white rounded-lg p-6 max-w-sm w-full">
<h2 class="text-xl font-semibold mb-4">Confirm Submission</h2>
<p class="text-gray-700 mb-2">You have attempted <span id="attempted-count">0</span> of 38 questions.</p>
<p class="text-gray-700 mb-4"><span id="unattempted-count">0</span> questions are unattempted.</p>
<div class="flex justify-end space-x-4">
<button class="bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 transition" id="cancel-submit">Cancel</button>
<button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition" id="confirm-submit">Submit Test</button>
</div>
</div>
</div>
<!-- Quiz Navigation Panel -->
<div class="fixed inset-y-0 right-0 nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="nav-panel">
<h2 class="text-lg font-semibold mb-4">Questions Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-nav">Close</button>
</div>
<!-- Results Navigation Panel -->
<div class="fixed inset-y-0 right-0 results-nav-panel bg-white shadow-lg p-4 hidden overflow-y-auto" id="results-nav-panel">
<h2 class="text-lg font-semibold mb-4">Results Navigation</h2>
<div class="mb-4">
<select class="w-full p-2 border rounded-lg text-gray-700" id="results-nav-filter">
<option value="all">All Questions</option>
<option value="answered">Answered</option>
<option value="unanswered">Unanswered</option>
<option value="marked">Marked for Review</option>
</select>
</div>
<div class="grid grid-cols-5 gap-2 md:gap-3" id="results-nav-grid"></div>
<button class="mt-4 bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition w-full" id="close-results-nav">Close</button>
</div>
<!-- JavaScript Logic -->
<script>
        // Enable debug mode for detailed logging
        const DEBUG_MODE = true;

        // Log debug messages
        function debugLog(message) {
            if (DEBUG_MODE) {
                console.log(`[DEBUG] ${message}`);
            }
        }

        // Initialize questions with error handling
        let questions = [];
        let currentResultQuestion = 0; // State for current question in results
        try {
            debugLog("Attempting to parse questions_json");
            questions = [{"text": "Diagnosis of the xray :", "options": [{"label": "A", "text": "Pilon fracture", "correct": true}, {"label": "B", "text": "Aviators fracture", "correct": false}, {"label": "C", "text": "Pottâ€™s fracture", "correct": false}, {"label": "D", "text": "Lovers fracture", "correct": false}], "correct_answer": "A. Pilon fracture", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/5308006115.jpg"], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26432601704985736/26432601704985736.m3u8"}, {"text": "March fracture involves:", "options": [{"label": "A", "text": "1st and 2nd metatarsal", "correct": false}, {"label": "B", "text": "2nd and 3rd metatarsal", "correct": true}, {"label": "C", "text": "3rd and 4th metatarsal", "correct": false}, {"label": "D", "text": "4th and 5th metatarsal", "correct": false}], "correct_answer": "B. 2nd and 3rd metatarsal", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho29.jpg"], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/69403861704985747/69403861704985747.m3u8"}, {"text": "Fracture involving both the malleoli is:", "options": [{"label": "A", "text": "Cottonâ€™s fracture", "correct": false}, {"label": "B", "text": "Pottâ€™s fracture", "correct": true}, {"label": "C", "text": "loverâ€™s fracture", "correct": false}, {"label": "D", "text": "Pilon fracture", "correct": false}], "correct_answer": "B. Pottâ€™s fracture", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/2562441704985869/2562441704985869.m3u8"}, {"text": "Avascular necrosis is a complication of", "options": [{"label": "A", "text": "Fracture of talus", "correct": true}, {"label": "B", "text": "Fracture of medial condyle of femur", "correct": false}, {"label": "C", "text": "Olecranon fracture", "correct": false}, {"label": "D", "text": "Radial head fracture", "correct": false}], "correct_answer": "A. Fracture of talus", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38524151704985906/38524151704985906.m3u8"}, {"text": "Bohlerâ€™s angle is for:", "options": [{"label": "A", "text": "Talus", "correct": false}, {"label": "B", "text": "CTEV", "correct": false}, {"label": "C", "text": "Calcaneum", "correct": true}, {"label": "D", "text": "Scaphoid", "correct": false}], "correct_answer": "C. Calcaneum", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho31.jpg"], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54849031704985916/54849031704985916.m3u8"}, {"text": "Gissaneâ€™s angle in intra-articular fracture of Calcaneum is:", "options": [{"label": "A", "text": "Reduced", "correct": false}, {"label": "B", "text": "Increased", "correct": true}, {"label": "C", "text": "Not Changed", "correct": false}, {"label": "D", "text": "Variable", "correct": false}], "correct_answer": "B. Increased", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/6746061704985927/6746061704985927.m3u8"}, {"text": "Fracture of Calcaneum is associated most commonly with which of the following:", "options": [{"label": "A", "text": "Fracture rib", "correct": false}, {"label": "B", "text": "Fracture vertebrae", "correct": true}, {"label": "C", "text": "Fracture skull", "correct": false}, {"label": "D", "text": "Fracture fibula", "correct": false}], "correct_answer": "B. Fracture vertebrae", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/44829911704985938/44829911704985938.m3u8"}, {"text": "Stress fracture are diagnosed by ?", "options": [{"label": "A", "text": "Xray", "correct": false}, {"label": "B", "text": "CT", "correct": false}, {"label": "C", "text": "MRI", "correct": true}, {"label": "D", "text": "Bone scan", "correct": false}], "correct_answer": "C. MRI", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/38390651704466622/38390651704466622.m3u8"}, {"text": "Least common complication of fall from height is:", "options": [{"label": "A", "text": "Fracture base of skull", "correct": false}, {"label": "B", "text": "Fracture calcaneum", "correct": false}, {"label": "C", "text": "Fracture fibula", "correct": true}, {"label": "D", "text": "Fracture 12th thoracic vertebra", "correct": false}], "correct_answer": "C. Fracture fibula", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65269831704985949/65269831704985949.m3u8"}, {"text": "Diagnosis of the given X ray :", "options": [{"label": "A", "text": "Lisfranc fracture", "correct": true}, {"label": "B", "text": "Fracture base of 2nd MT", "correct": false}, {"label": "C", "text": "Fracture of cuneiform", "correct": false}, {"label": "D", "text": "Metatarsal fracture", "correct": false}], "correct_answer": "A. Lisfranc fracture", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/964630125.jpg"], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/26593841704985960/26593841704985960.m3u8"}, {"text": "Joneâ€™s fracture is:", "options": [{"label": "A", "text": "Fracture of base of 5th metatarsal", "correct": true}, {"label": "B", "text": "Fracture of base of 2nd metatarsal", "correct": false}, {"label": "C", "text": "Fracture of base of 1st metacarpal", "correct": false}, {"label": "D", "text": "Fracture of head of 5th metacarpal", "correct": false}], "correct_answer": "A. Fracture of base of 5th metatarsal", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho33.jpg"], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/18906261704985973/18906261704985973.m3u8"}, {"text": "Tillaux fracture involves:", "options": [{"label": "A", "text": "Lower end tibia", "correct": true}, {"label": "B", "text": "Upper end tibia", "correct": false}, {"label": "C", "text": "Lower end femur", "correct": false}, {"label": "D", "text": "Upper end femur", "correct": false}], "correct_answer": "A. Lower end tibia", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho35.jpg"], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7984531704985997/7984531704985997.m3u8"}, {"text": "Pellegrini-stieda Disease is:", "options": [{"label": "A", "text": "Avulsion of femoral attachment of MCL", "correct": true}, {"label": "B", "text": "Avulsion of tibia attachment of MCL", "correct": false}, {"label": "C", "text": "Avulsion of femoral attachment of LCL", "correct": false}, {"label": "D", "text": "Avulsion of tibial attachment of LCL", "correct": false}], "correct_answer": "A. Avulsion of femoral attachment of MCL", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho37.jpg"], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/58554161704986007/58554161704986007.m3u8"}, {"text": "Toddler fracture involves:", "options": [{"label": "A", "text": "Femur", "correct": false}, {"label": "B", "text": "Tibia", "correct": true}, {"label": "C", "text": "Fibula", "correct": false}, {"label": "D", "text": "Patella", "correct": false}], "correct_answer": "B. Tibia", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho38.jpg"], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36945121704986017/36945121704986017.m3u8"}, {"text": "Rocker bottom foot is seen in:", "options": [{"label": "A", "text": "Congenital vertical talus", "correct": false}, {"label": "B", "text": "Arthrogryposis", "correct": false}, {"label": "C", "text": "Holding club foot in too long corrected position", "correct": false}, {"label": "D", "text": "All of the above", "correct": true}], "correct_answer": "D. All of the above", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (D)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/15121501704982642/15121501704982642.m3u8"}, {"text": "All of the following are done for management of clubfoot at birth except:", "options": [{"label": "A", "text": "Manipulation", "correct": false}, {"label": "B", "text": "Serial Casting", "correct": false}, {"label": "C", "text": "Recording the deformity to see improvements serially", "correct": false}, {"label": "D", "text": "Posteromedial soft tissue release", "correct": true}], "correct_answer": "D. Posteromedial soft tissue release", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (D)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/27436621704982654/27436621704982654.m3u8"}, {"text": "The last deformity to be corrected by Ponsetti method for CTEV is:", "options": [{"label": "A", "text": "Heel Varus", "correct": false}, {"label": "B", "text": "Equinus", "correct": true}, {"label": "C", "text": "Foot Adduction", "correct": false}, {"label": "D", "text": "Cavus", "correct": false}], "correct_answer": "B. Equinus", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/17430631704982665/17430631704982665.m3u8"}, {"text": "The typical deformity in CTEV is:", "options": [{"label": "A", "text": "Ankle equinus", "correct": false}, {"label": "B", "text": "Subtalar inversion", "correct": false}, {"label": "C", "text": "Forefoot adduction", "correct": false}, {"label": "D", "text": "All the above", "correct": true}], "correct_answer": "D. All the above", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (D)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45330041704982796/45330041704982796.m3u8"}, {"text": "In correction of CTEV, which one of the following deformities resists?", "options": [{"label": "A", "text": "Equinus", "correct": true}, {"label": "B", "text": "Varus", "correct": false}, {"label": "C", "text": "Adduction", "correct": false}, {"label": "D", "text": "Cavus", "correct": false}], "correct_answer": "A. Equinus", "question_images": [], "explanation_images": [], "explanation": "<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/36585011704982811/36585011704982811.m3u8"}, {"text": "These shoes are used in:", "options": [{"label": "A", "text": "CTEV", "correct": true}, {"label": "B", "text": "Congenital vertical talus", "correct": false}, {"label": "C", "text": "Rocker bottom foot", "correct": false}, {"label": "D", "text": "Metatarsus adductus", "correct": false}], "correct_answer": "A. CTEV", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/1653452610.jpg"], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/52368701704982827/52368701704982827.m3u8"}, {"text": "In neglected cases of CTEV, joint fused are:", "options": [{"label": "A", "text": "Calcaneocuboid, talonavicular and talocalcaneal", "correct": true}, {"label": "B", "text": "Tibiotalar, calcaneocuboid and talonavicular", "correct": false}, {"label": "C", "text": "Ankle joint, calcaneocuboid and talonavicular", "correct": false}, {"label": "D", "text": "None of the above", "correct": false}], "correct_answer": "A. Calcaneocuboid, talonavicular and talocalcaneal", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/24194151704982841/24194151704982841.m3u8"}, {"text": "A newborn child presents with inverted foot and the dorsum of the foot can not touch the anterior tibia. The most probable diagnosis:", "options": [{"label": "A", "text": "Congenital vertical talus", "correct": false}, {"label": "B", "text": "Arthrogryposis", "correct": false}, {"label": "C", "text": "Congenital talipes equino varus", "correct": true}, {"label": "D", "text": "PES planus", "correct": false}], "correct_answer": "C. Congenital talipes equino varus", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/7017101704982878/7017101704982878.m3u8"}, {"text": "The ideal treatment of bilateral idiopathic Clubfoot in a newborn is:", "options": [{"label": "A", "text": "Manipulation by mother", "correct": false}, {"label": "B", "text": "Manipulation and dennis brown splint", "correct": false}, {"label": "C", "text": "Manipulation and and casts", "correct": true}, {"label": "D", "text": "Surgical release", "correct": false}], "correct_answer": "C. Manipulation and and casts", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho15.jpg"], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/45648531704982897/45648531704982897.m3u8"}, {"text": "The club foot characteristically involves:", "options": [{"label": "A", "text": "Foot and ankle", "correct": false}, {"label": "B", "text": "Foot, ankle and leg", "correct": true}, {"label": "C", "text": "Foot only", "correct": false}, {"label": "D", "text": "Foot, ankle, leg and knee joint", "correct": false}], "correct_answer": "B. Foot, ankle and leg", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/40003221704982910/40003221704982910.m3u8"}, {"text": "Most important pathology in club foot is:", "options": [{"label": "A", "text": "Congenital talonavicular dislocation", "correct": true}, {"label": "B", "text": "Tightening of Tendoachilles", "correct": false}, {"label": "C", "text": "Calcaneal fracture", "correct": false}, {"label": "D", "text": "Lateral derangement", "correct": false}], "correct_answer": "A. Congenital talonavicular dislocation", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54529851704982928/54529851704982928.m3u8"}, {"text": "A cause of comminuted fracture of tibia presenting with severe pain in the calf on dorsiflexion of the foot. There is also numbness on the sole of foot. Distal pulses are present. What is the probable diagnosis?", "options": [{"label": "A", "text": "Rupture of Achilles tendon", "correct": false}, {"label": "B", "text": "Gastrocnemius and soleus muscle tear", "correct": false}, {"label": "C", "text": "Compartment syndrome", "correct": true}, {"label": "D", "text": "Tarsal tunnel syndrome", "correct": false}], "correct_answer": "C. Compartment syndrome", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/64105501705038863/64105501705038863.m3u8"}, {"text": "Recurrent dislocations are least commonly seen in?", "options": [{"label": "A", "text": "Ankle", "correct": true}, {"label": "B", "text": "Hip", "correct": false}, {"label": "C", "text": "Shoulder", "correct": false}, {"label": "D", "text": "Patella", "correct": false}], "correct_answer": "A. Ankle", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/65058901705064539/65058901705064539.m3u8"}, {"text": "Pipkinâ€™s classification system is used for .", "options": [{"label": "A", "text": "Fracture femur head", "correct": true}, {"label": "B", "text": "Fracture femur shaft", "correct": false}, {"label": "C", "text": "Fracture proximal tibia", "correct": false}, {"label": "D", "text": "Fracture calcaneum", "correct": false}], "correct_answer": "A. Fracture femur head", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/21894201704466013/21894201704466013.m3u8"}, {"text": "Which among the following is not a feature of Unhappy triad of Oâ€™ Donoghue?", "options": [{"label": "A", "text": "ACL injury", "correct": false}, {"label": "B", "text": "Medial meniscus injury", "correct": false}, {"label": "C", "text": "Medial collateral ligament injury", "correct": false}, {"label": "D", "text": "Fibular collateral ligament injury", "correct": true}], "correct_answer": "D. Fibular collateral ligament injury", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (D)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/20706771705064818/20706771705064818.m3u8"}, {"text": "Commonest ligament injured in ankle injury?", "options": [{"label": "A", "text": "Anterior talofibular ligament", "correct": true}, {"label": "B", "text": "Calcaneofibular ligament", "correct": false}, {"label": "C", "text": "Posterior talofibular ligament", "correct": false}, {"label": "D", "text": "Spring ligament", "correct": false}], "correct_answer": "A. Anterior talofibular ligament", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/63848101705065832/63848101705065832.m3u8"}, {"text": "A-23- year old profession footballer suffered a twisting injury to his right ankle. On examination there is a lot of swelling around the medial malleolus but X- ray doesnâ€™t show any fracture. The structure injured could be?", "options": [{"label": "A", "text": "Deltiod ligament", "correct": true}, {"label": "B", "text": "Anterior talofibular ligament", "correct": false}, {"label": "C", "text": "Spring ligament", "correct": false}, {"label": "D", "text": "Tendo Achilles", "correct": false}], "correct_answer": "A. Deltiod ligament", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/4879101705065850/4879101705065850.m3u8"}, {"text": "Identify the abnormality shown in the following picture:", "options": [{"label": "A", "text": "Hallux valgus", "correct": true}, {"label": "B", "text": "Hallux varus", "correct": false}, {"label": "C", "text": "Rheumatoid valgus", "correct": false}, {"label": "D", "text": "Subcutaneous nodule", "correct": false}], "correct_answer": "A. Hallux valgus", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/3065366q357orthodqb.jpg"], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/61055511705065862/61055511705065862.m3u8"}, {"text": "A patient complains of pain in sole on prolonged standing with the following xray, diagnosis is:", "options": [{"label": "A", "text": "Plantar fasciitis", "correct": true}, {"label": "B", "text": "Tarsal coalition", "correct": false}, {"label": "C", "text": "Ankylosing spondylitis", "correct": false}, {"label": "D", "text": "Calcaneal old healed fracture", "correct": false}], "correct_answer": "A. Plantar fasciitis", "question_images": ["https://d2enu63wt1sf3u.cloudfront.net/course_file_meta/6408614q358dqbortho.jpg"], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/51955791705065874/51955791705065874.m3u8"}, {"text": "Following are principles in the treatment of compound fractures except", "options": [{"label": "A", "text": "Wound debridement", "correct": false}, {"label": "B", "text": "Immediate wound closure", "correct": true}, {"label": "C", "text": "Tendon repair", "correct": false}, {"label": "D", "text": "Aggressive antibiotic therapy", "correct": false}], "correct_answer": "B. Immediate wound closure", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/54676911704466165/54676911704466165.m3u8"}, {"text": "Cast syndrome is a complication of:", "options": [{"label": "A", "text": "Hip spica", "correct": true}, {"label": "B", "text": "Below elbow cast", "correct": false}, {"label": "C", "text": "Above elbow cast", "correct": false}, {"label": "D", "text": "PTB cast", "correct": false}], "correct_answer": "A. Hip spica", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (A)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/43690051704465644/43690051704465644.m3u8"}, {"text": "Traction not used in lower limb:", "options": [{"label": "A", "text": "Gallows", "correct": false}, {"label": "B", "text": "Bryant", "correct": false}, {"label": "C", "text": "Dunlop", "correct": true}, {"label": "D", "text": "Perkin", "correct": false}], "correct_answer": "C. Dunlop", "question_images": [], "explanation_images": ["https://d2enu63wt1sf3u.cloudfront.net/ckfinder/files/Ortho71.jpg"], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/42141391704465699/42141391704465699.m3u8"}, {"text": "Regarding SACH foot, all are true except?", "options": [{"label": "A", "text": "Solid ankle cushion heel", "correct": false}, {"label": "B", "text": "Prosthesis", "correct": false}, {"label": "C", "text": "Squatting is easy", "correct": true}, {"label": "D", "text": "Does not look like a normal foot", "correct": false}], "correct_answer": "C. Squatting is easy", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (C)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/22007441704468204/22007441704468204.m3u8"}, {"text": "Jaipur foot was invented by?", "options": [{"label": "A", "text": "B.L.Sehgal", "correct": false}, {"label": "B", "text": "P.K.Sethi", "correct": true}, {"label": "C", "text": "Rajnath", "correct": false}, {"label": "D", "text": "S.K.Verma", "correct": false}], "correct_answer": "B. P.K.Sethi", "question_images": [], "explanation_images": [], "explanation": "<p><strong>Correct Answer (B)</strong></p>\n<p>@dams_new_robot</p>", "bot": "@dams_new_robot", "video": "https://d2enu63wt1sf3u.cloudfront.net/dqb_vod/13100581704468245/13100581704468245.m3u8"}];
            if (!Array.isArray(questions) || questions.length === 0) {
                throw new Error("Questions data is empty or invalid");
            }
            debugLog(`Successfully parsed ${questions.length} questions`);
        } catch (e) {
            console.error("Failed to parse questions_json:", e);
            document.getElementById(